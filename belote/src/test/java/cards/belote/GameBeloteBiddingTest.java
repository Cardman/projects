package cards.belote;
import static cards.belote.EquallableBeloteUtil.assertEq;
import static org.junit.Assert.assertTrue;

import org.junit.Test;

import cards.belote.enumerations.BidBelote;
import cards.belote.enumerations.CardBelote;
import cards.belote.enumerations.DealingBelote;
import cards.consts.GameType;
import cards.consts.MixCardsChoice;
import cards.consts.Suit;
import code.util.CustList;
import code.util.EnumList;
import code.util.EnumMap;
import code.util.EqList;


public class GameBeloteBiddingTest extends GameBeloteWithTrumpSuit {


    static DealBelote initializeHands() {
        EqList<HandBelote> mains_ = new EqList<HandBelote>();
        HandBelote main_ = new HandBelote();
        main_.ajouter(CardBelote.DIAMOND_QUEEN);
        main_.ajouter(CardBelote.HEART_10);
        main_.ajouter(CardBelote.SPADE_9);
        main_.ajouter(CardBelote.CLUB_JACK);
        main_.ajouter(CardBelote.DIAMOND_8);
        mains_.add(main_);
        main_ = new HandBelote();
        main_.ajouter(CardBelote.HEART_1);
        main_.ajouter(CardBelote.HEART_KING);
        main_.ajouter(CardBelote.SPADE_JACK);
        main_.ajouter(CardBelote.CLUB_7);
        main_.ajouter(CardBelote.HEART_7);
        mains_.add(main_);
        main_ = new HandBelote();
        main_.ajouter(CardBelote.SPADE_7);
        main_.ajouter(CardBelote.SPADE_QUEEN);
        main_.ajouter(CardBelote.SPADE_8);
        main_.ajouter(CardBelote.DIAMOND_JACK);
        main_.ajouter(CardBelote.SPADE_10);
        mains_.add(main_);
        main_ = new HandBelote();
        main_.ajouter(CardBelote.DIAMOND_1);
        main_.ajouter(CardBelote.DIAMOND_KING);
        main_.ajouter(CardBelote.CLUB_QUEEN);
        main_.ajouter(CardBelote.SPADE_1);
        main_.ajouter(CardBelote.CLUB_8);
        mains_.add(main_);
        main_ = new HandBelote();
        main_.ajouter(CardBelote.DIAMOND_9);
        main_.ajouter(CardBelote.CLUB_KING);
        main_.ajouter(CardBelote.HEART_QUEEN);
        main_.ajouter(CardBelote.CLUB_9);
        main_.ajouter(CardBelote.HEART_8);
        main_.ajouter(CardBelote.CLUB_10);
        main_.ajouter(CardBelote.DIAMOND_10);
        main_.ajouter(CardBelote.HEART_JACK);
        main_.ajouter(CardBelote.CLUB_1);
        main_.ajouter(CardBelote.HEART_9);
        main_.ajouter(CardBelote.SPADE_KING);
        main_.ajouter(CardBelote.DIAMOND_7);
        mains_.add(main_);
        return new DealBelote(mains_,(byte)3);

    }

    static RulesBelote initializeDefaultRules() {
        RulesBelote regles_=new RulesBelote();
        regles_.setCartesBattues(MixCardsChoice.NEVER);
        EnumMap<BidBelote,Boolean> contrats_ = new EnumMap<BidBelote,Boolean>();
        for (BidBelote b: regles_.getEncheresAutorisees().getKeys()) {
            contrats_.put(b, b.getToujoursPossibleAnnoncer());
        }
        if(!BidBelote.NO_TRUMP.getToujoursPossibleAnnoncer()) {
            contrats_.put(BidBelote.NO_TRUMP, false);
        }
        if(!BidBelote.ALL_TRUMP.getToujoursPossibleAnnoncer()) {
            contrats_.put(BidBelote.ALL_TRUMP, false);
        }
        regles_.setEncheresAutorisees(contrats_);
        return regles_;
    }

    static RulesBelote initializeRulesWithBids(EnumList<BidBelote> _bids) {
        RulesBelote regles_=new RulesBelote();
        regles_.setCartesBattues(MixCardsChoice.NEVER);
        EnumMap<BidBelote,Boolean> contrats_ = new EnumMap<BidBelote,Boolean>();
        for (BidBelote b: regles_.getEncheresAutorisees().getKeys()) {
            contrats_.put(b, b.getToujoursPossibleAnnoncer());
        }
        if(!BidBelote.NO_TRUMP.getToujoursPossibleAnnoncer()) {
            contrats_.put(BidBelote.NO_TRUMP, false);
        }
        if(!BidBelote.ALL_TRUMP.getToujoursPossibleAnnoncer()) {
            contrats_.put(BidBelote.ALL_TRUMP, false);
        }
        for (BidBelote b: _bids) {
            contrats_.put(b,true);
        }
        regles_.setEncheresAutorisees(contrats_);
        return regles_;
    }

    static RulesBelote initializeRulesWithBidPoints(boolean _addOverBid) {
        RulesBelote regles_=new RulesBelote();
        regles_.setCartesBattues(MixCardsChoice.NEVER);
        regles_.setRepartition(DealingBelote.COINCHE_2_VS_2);
        EnumMap<BidBelote,Boolean> contrats_ = new EnumMap<BidBelote,Boolean>();
        for (BidBelote b: regles_.getEncheresAutorisees().getKeys()) {
            contrats_.put(b, b.getToujoursPossibleAnnoncer());
        }
        if(!BidBelote.NO_TRUMP.getToujoursPossibleAnnoncer()) {
            contrats_.put(BidBelote.NO_TRUMP, false);
        }
        if(!BidBelote.ALL_TRUMP.getToujoursPossibleAnnoncer()) {
            contrats_.put(BidBelote.ALL_TRUMP, false);
        }
        if (_addOverBid) {
            for (BidBelote b: regles_.getEncheresAutorisees().getKeys()) {
                contrats_.put(b,true);
            }
        }
        regles_.setEncheresAutorisees(contrats_);
        return regles_;
    }    @Test
    public void allowedBids_AtFirstRoundBidsInitialize1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeWithoutTakingBid1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeByTakingBid1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.SUIT);
        contratTmp_.setCouleur(Suit.DIAMOND);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(!game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitialize1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
        //max_contrat()
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeWithoutTakingBid1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeByTakingBid1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.OTHER_SUIT);
        contratTmp_.setCouleur(Suit.HEART);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(!game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(2).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(3).estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializePassing1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(!game.keepBidding());
    }
    @Test
    public void maximumBid_AtFirstRound1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        asserting(expected_,maximunBidsSuits_);
    }
    @Test
    public void maximumBid_AtSecondRound1(){
        RulesBelote regles_=initializeDefaultRules();
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        assertTrue(BidBeloteSuit.equalsSet(expected_,maximunBidsSuits_));
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitialize2Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        expected_.add(b_);
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitialize3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.ALL_TRUMP);
        expected_.add(b_);
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitialize4(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP, BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.ALL_TRUMP);
        expected_.add(b_);
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeWithoutTakingBid2Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP)));
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeWithoutTakingBid3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.ALL_TRUMP)));
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeWithoutTakingBid4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP)));
        asserting(expected_,bids_);
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeByTakingBid2Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.SUIT);
        contratTmp_.setCouleur(Suit.DIAMOND);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        EqList<BidBeloteSuit> bidsGr_ = toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        expected_.addAllElts(bidsGr_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
        assertTrue(bidsGr_.first().estDemandable(game.getContrat()));
        assertTrue(bidsGr_.last().estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeByTakingBid3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.SUIT);
        contratTmp_.setCouleur(Suit.DIAMOND);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        EqList<BidBeloteSuit> bidsGr_ = toRealBid(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        expected_.addAllElts(bidsGr_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
        assertTrue(bidsGr_.first().estDemandable(game.getContrat()));
        assertTrue(bidsGr_.last().estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtFirstRoundBidsInitializeByTakingBid4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.SUIT);
        contratTmp_.setCouleur(Suit.DIAMOND);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        expected_.add(b_);
        EqList<BidBeloteSuit> bidsGr_ = toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        expected_.addAllElts(bidsGr_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
        assertTrue(bidsGr_.first().estDemandable(game.getContrat()));
        assertTrue(bidsGr_.last().estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitialize2Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP)));
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitialize3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.ALL_TRUMP)));
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitialize4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP)));
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeWithoutTakingBid2Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP)));
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeWithoutTakingBid3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.ALL_TRUMP)));
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeWithoutTakingBid4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        expected_.addAllElts(toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP)));
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeByTakingBid2Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.OTHER_SUIT);
        contratTmp_.setCouleur(Suit.HEART);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        EqList<BidBeloteSuit> bidsGr_ = toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        expected_.addAllElts(bidsGr_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(2).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(3).estDemandable(game.getContrat()));
        assertTrue(bidsGr_.first().estDemandable(game.getContrat()));
        assertTrue(bidsGr_.last().estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeByTakingBid3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.OTHER_SUIT);
        contratTmp_.setCouleur(Suit.HEART);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        EqList<BidBeloteSuit> bidsGr_ = toRealBid(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        expected_.addAllElts(bidsGr_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(2).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(3).estDemandable(game.getContrat()));
        assertTrue(bidsGr_.first().estDemandable(game.getContrat()));
        assertTrue(bidsGr_.last().estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializeByTakingBid4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.OTHER_SUIT);
        contratTmp_.setCouleur(Suit.HEART);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(game.keepBidding());
        //game.setContrat(contrat_tmp);
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.FOLD);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.HEART);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.SPADE);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.OTHER_SUIT);
        b_.setCouleur(Suit.CLUB);
        expected_.add(b_);
        EqList<BidBeloteSuit> bidsGr_ = toRealBid(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        expected_.addAllElts(bidsGr_);
        asserting(expected_,bids_);
        assertTrue(expected_.get(0).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(1).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(2).estDemandable(game.getContrat()));
        assertTrue(!expected_.get(3).estDemandable(game.getContrat()));
        assertTrue(bidsGr_.first().estDemandable(game.getContrat()));
        assertTrue(bidsGr_.last().estDemandable(game.getContrat()));
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializePassing2Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(!game.keepBidding());
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializePassing3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(!game.keepBidding());
    }
    @Test
    public void allowedBids_AtSecondRoundBidsInitializePassing4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        byte player_ = game.playerAfter(game.getDistribution().getDonneur());
        assertTrue(game.keepBidding());
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        game.finEncherePremierTour();
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        player_ = game.playerAfter(player_);
        assertTrue(game.keepBidding());
        contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.FOLD);
        game.ajouterContrat(contratTmp_,player_);
        assertTrue(!game.keepBidding());
    }


    private static EqList<BidBeloteSuit> toRealBid(EnumList<BidBelote> _bids) {
        EqList<BidBeloteSuit> bids_ = new EqList<BidBeloteSuit>();
        for (BidBelote e: _bids) {
            BidBeloteSuit bid_ = new BidBeloteSuit();
            bid_.setEnchere(e);
            bids_.add(bid_);
        }
        return bids_;
    }    @Test
    public void maximumBid_AtFirstRound2(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        BidBeloteSuit b_;
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        assertEq(1, maximunBidsSuits_.size());
        assertTrue(maximunBidsSuits_.containsObj(b_));
    }
    @Test
    public void maximumBid_AtFirstRound3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.ALL_TRUMP);
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        assertEq(1, maximunBidsSuits_.size());
        assertTrue(maximunBidsSuits_.containsObj(b_));
    }
    @Test
    public void maximumBid_AtFirstRound4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.ALL_TRUMP);
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        assertEq(1, maximunBidsSuits_.size());
        assertTrue(maximunBidsSuits_.containsObj(b_));
    }
    @Test
    public void maximumBid_AtSecondRound2(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        assertEq(1, maximunBidsSuits_.size());
        assertTrue(maximunBidsSuits_.containsObj(b_));
    }
    @Test
    public void maximumBid_AtSecondRound3Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.ALL_TRUMP);
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        assertEq(1, maximunBidsSuits_.size());
        assertTrue(maximunBidsSuits_.containsObj(b_));
    }
    @Test
    public void maximumBid_AtSecondRound4Test(){
        RulesBelote regles_=initializeRulesWithBids(new EnumList<BidBelote>(BidBelote.NO_TRUMP,BidBelote.ALL_TRUMP));
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        game.finEncherePremierTour();
        BidBeloteSuit b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.ALL_TRUMP);
        EqList<BidBeloteSuit> maximunBidsSuits_ = game.maximumBid();
        assertEq(1, maximunBidsSuits_.size());
        assertTrue(maximunBidsSuits_.containsObj(b_));
    }
    @Test
    public void allowedBids1(){
        RulesBelote regles_=initializeRulesWithBidPoints(false);
        regles_.getEncheresAutorisees().put(BidBelote.NO_TRUMP, true);
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_;
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(80);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(80);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(80);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(80);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(90);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(90);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(90);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(90);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(100);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(100);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(100);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(100);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(110);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(110);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(110);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(110);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(120);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(120);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(120);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(120);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(130);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(130);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(130);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(130);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(140);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(140);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(140);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(140);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(80);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(90);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(100);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(110);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(120);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(130);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(140);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(162);
        expected_.add(b_);
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }
    @Test
    public void allowedBids2(){
        RulesBelote regles_=initializeRulesWithBidPoints(false);
        regles_.getEncheresAutorisees().put(BidBelote.NO_TRUMP, true);
        game = new GameBelote(GameType.RANDOM,initializeHands(),regles_);
        BidBeloteSuit contratTmp_ = new BidBeloteSuit();
        contratTmp_.setEnchere(BidBelote.SUIT);
        contratTmp_.setCouleur(Suit.DIAMOND);
        contratTmp_.setPoints(140);
        game.ajouterContrat(contratTmp_,game.playerAfter(game.getDistribution().getDonneur()));
        //game.resetNbPlisTotal();
        EqList<BidBeloteSuit> bids_ = game.allowedBids();
        EqList<BidBeloteSuit> expected_ = new EqList<BidBeloteSuit>();
        BidBeloteSuit b_;
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.HEART);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.SPADE);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.DIAMOND);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.SUIT);
        b_.setCouleur(Suit.CLUB);
        b_.setPoints(162);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(150);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(160);
        expected_.add(b_);
        b_ = new BidBeloteSuit();
        b_.setEnchere(BidBelote.NO_TRUMP);
        b_.setCouleur(Suit.UNDEFINED);
        b_.setPoints(162);
        expected_.add(b_);
        assertTrue(BidBeloteSuit.equalsSet(expected_,bids_));
    }


    //TODO change later
    private void asserting(EqList<BidBeloteSuit> _exp, EqList<BidBeloteSuit> _res) {
        assertEq(_exp.size(), _res.size());
        int s_ = _exp.size();
        for (int i = CustList.FIRST_INDEX; i < s_; i++) {
            assertEq(_exp.get(i), _res.get(i));
        }
    }}