package code.formathtml;
import static code.formathtml.EquallableExUtil.assertEq;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertNotSame;
import static org.junit.Assert.assertNull;
import static org.junit.Assert.assertSame;
import static org.junit.Assert.assertTrue;

import org.junit.Ignore;
import org.junit.Test;

import code.bean.Bean;
import code.bean.translator.Translator;
import code.bean.validator.Validator;
import code.expressionlanguage.ContextEl;
import code.expressionlanguage.VariableSuffix;
import code.expressionlanguage.opers.util.Struct;
import code.formathtml.classes.BeanEight;
import code.formathtml.classes.BeanFive;
import code.formathtml.classes.BeanOne;
import code.formathtml.classes.BeanSeven;
import code.formathtml.classes.BeanSix;
import code.formathtml.classes.BeanThree;
import code.formathtml.classes.BeanTwo;
import code.formathtml.classes.EnumNumber;
import code.formathtml.classes.EnumNumbers;
import code.formathtml.classes.Ints;
import code.formathtml.classes.MyTranslator;
import code.formathtml.classes.MyValidator;
import code.formathtml.classes.MyValidatorEnum;
import code.formathtml.classes.MyValidatorEnums;
import code.formathtml.classes.Rate;
import code.formathtml.classes.SimpleDataBase;
import code.formathtml.classes.SimpleMathFactory;
import code.formathtml.classes.UnselectedRadio;
import code.formathtml.util.NodeContainer;
import code.formathtml.util.NodeInformations;
import code.sml.DocumentBuilder;
import code.util.EntryCust;
import code.util.NatTreeMap;
import code.util.NumberMap;
import code.util.StringList;
import code.util.StringMap;
import code.util.StringMapObject;

@SuppressWarnings("static-method")
public class NavigationTest {

    @Test
    public void initializeSession1Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a href=\"\"/><c:import page=\"page2.html\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("session");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a href=\"\"/> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void initializeSession2Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><head><title><c:message value=\"msg_example,one\"/></title></head><body>HEAD<a href=\"\"/><c:import page=\"page2.html\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("session");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><head><title>Description one</title></head><body>HEAD<a href=\"\"/> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertEq("Description one",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void reinitBean1Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a href=\"\"/><c:import page=\"page2.html\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("session");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        assertTrue(!nav_.reinitBean("page2.html", "bean_one", "bean_one"));
        setupBeansAfter(conf_);
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void reinitBean2Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a href=\"\"/><c:import page=\"page2.html\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        assertTrue(!nav_.reinitBean("page2.html", "bean_one", "bean_two"));
        setupBeansAfter(conf_);
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void reinitBean3Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a href=\"\"/><c:import page=\"page2.html\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        assertTrue(nav_.reinitBean("page2.html", "bean_one", "bean_one"));
        setupBeansAfter(conf_);
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void reinitBean4Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a href=\"\"/><c:import page=\"page2.html\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("page");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        assertTrue(nav_.reinitBean("page2.html", "bean_one", "bean_one"));
        setupBeansAfter(conf_);
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void reinitBean5Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a href=\"\"/><c:import page=\"page2.html\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("page");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        assertTrue(!nav_.reinitBean("page1.html", "bean_one", "bean_one"));
        setupBeansAfter(conf_);
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest1Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"page2.html\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("session");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("page2.html");
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest2Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"page2.html\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("page2.html");
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest3Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToPage", new StringMap<String>());
        conf_.getNavigation().getVal("bean_one.goToPage").put("page", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_one.goToPage");
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest4Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToNullPage", new StringMap<String>());

        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_one.goToNullPage");
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest5Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToPage(4)\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToPage()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_one.goToPage()").put("page4", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_one.goToPage(4)");
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest6Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToNullPage", new StringMap<String>());

        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("");
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest7Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToPage(4)\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToPage()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_one.goToPage()").put("page_", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_one.goToPage(4)");
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToPage(4)\" href=\"\"/></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest8Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;&eacute;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><head><title><c:message value=\"msg_example,three\" escaped=\"escaped\"><param value=\"My quoted title\" quoted=\"quoted\"/></c:message></title></head><body>HEAD<a c:command=\"$goToPage(4)\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToPage()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_one.goToPage()").put("page_", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_one.goToPage(4)");
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
//        assertXMLEqualNoPrefix("<html><head><title>desc &lt;My quoted title&gt;&amp;eacute;</title></head><body>HEAD<a c:command=\"$bean_one.goToPage(4)\" href=\"\"/></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><head><title>desc &amp;lt;My quoted title&amp;gt;\u00E9</title></head><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToPage(4)\" href=\"\"/></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("desc &lt;My quoted title&gt;\u00E9",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest9Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one&eacute;\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><head><title><c:message value=\"msg_example,one\"/></title></head><body>HEAD<a c:command=\"$goToPage(4)\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToPage()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_one.goToPage()").put("page_", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_one.goToPage(4)");
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><head><title>Description one\u00E9</title></head><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToPage(4)\" href=\"\"/></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("Description one\u00E9",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest10Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"page2.html\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form><a name=\"here\">Title loc</a></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("session");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("page2.html#here");
        setupBeansAfter(conf_);
        assertEq("page2.html#here", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form><a name=\"here\">Title loc</a></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("here",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest11Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"page2.html\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form><a name=\"here\" title=\"Tool tip\">Title loc</a><a href=\"\" name=\"here\">Title href</a><a href=\"a_ref\" name=\"here\" title=\"a_title\">Title real</a></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("session");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("page2.html#here");
        setupBeansAfter(conf_);
        assertEq("page2.html#here", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form><a name=\"here\" title=\"Tool tip\">Title loc</a><a href=\"\" name=\"here\">Title href</a><a n-a=\"0\" href=\"a_ref\" name=\"here\" title=\"a_title\">Title real</a></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("here",nav_.getReferenceScroll());
        assertEq(1,nav_.getTooltips().size());
        assertEq("a_title",nav_.getTooltips().first());
    }

    @Test
    public void processAnchorRequest12Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one&eacute;\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><head><title><c:message value=\"msg_example,four\"/></title></head><body>HEAD<a c:command=\"$goToPage(4)\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_one.goToPage()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_one.goToPage()").put("page_", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_one.goToPage(4)");
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><head><title>'asp'</title></head><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToPage(4)\" href=\"\"/></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("'asp'",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest13Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one&eacute;\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html xmlns:c='javahtml'><head><title><c:message value=\"msg_example,four\"/></title></head><body>HEAD<a c:command=\"page2.html\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html xmlns:c='javahtml'><body><c:message value=\"msg_example,four\"/> NEXT<form action=\"DELETE\">2</form><form action=\"go\">4</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
//        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
//        bean_.setScope("request");
//        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
//        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
//        conf_.getBeans().put("bean_one", bean_);
//        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_one.goToPage()", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_one.goToPage()").put("page_", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("page2.html");
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>'asp' NEXT<form n-f=\"0\" action=\"DELETE\">2</form><form n-f=\"1\" action=\"go\">4</form></body></html>", nav_.getHtmlText());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processAnchorRequest14Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one&eacute;\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_seven\" xmlns:c='javahtml'><head><title><c:message value=\"msg_example,four\"/></title></head><body>HEAD<a c:command=\"$goTwoArgs(4i,8i)\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body> NEXT<form action=\"DELETE\" c:command=\"go\">{typedInt}</form><form action=\"go\">{typedInt}</form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanSeven bean_ = new BeanSeven();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_seven.goTwoArgs(,)", new StringMap<String>());
        conf_.getNavigation().getVal("bean_seven.goTwoArgs(,)").put("bean12", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processAnchorRequest("$bean_seven.goTwoArgs(4i,8i)");
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body> NEXT<form n-f=\"0\" action=\"\" c:command=\"go\">0</form><form n-f=\"1\" action=\"go\">0</form></body></html>", nav_.getHtmlText());
        assertEq(0, conf_.getBeans().getVal("bean_seven").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_seven").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest1Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest2Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"ONE2\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("ONE2", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest3Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE_TWO", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest4Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"ONE_TWO\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest5Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"ONE_TWO\"/><span c:for=\"txt\">ONE_TWO is not a no zero rate</span></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest6Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("1/2");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"1/22\"/><span c:for=\"txt\"> </span></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("1/22", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("1/2",(String) map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest7Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("",(String) map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest8Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''\nfive={0} in error";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\" c:valueMessage=\"msg_example,five\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"ONE_TWO\"/><span c:for=\"txt\" c:valueMessage=\"msg_example,five\">ONE_TWO in error</span></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest9Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"number\" name=\"typedInt\" c:varValue=\"typedInt\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("8");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING",(String) map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(8, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest10Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"checkbox\" name=\"checked\" c:varValue=\"checked\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("on");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue((Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest11Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"checkbox\" name=\"checked\" varValue=\"checked\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest12Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest13Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input c:varValue=\"typedString\" name=\"typedString\" type=\"text\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        BeanTwo beanTwoChanged_ = (BeanTwo) nav_.getSession().getBeans().getVal("bean_two");
        beanTwoChanged_.setTypedString(null);
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TWO", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest14Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        BeanTwo beanTwoChanged_ = (BeanTwo) nav_.getSession().getBeans().getVal("bean_two");
        beanTwoChanged_.setChosenNumber(null);
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest15Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"checkbox\" name=\"nullableCheckbox\" varValue=\"nullableCheckbox\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("on");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue((Boolean)map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest16Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input class=\"java.lang.Long\" type=\"number\" name=\"nullableInt\" varValue=\"nullableInt\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("6");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertEq(6L, (Number)map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest17Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"checkbox\" name=\"nullableCheckbox\" varValue=\"nullableCheckbox\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(!(Boolean)map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest18Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input c:className=\"code.formathtml.classes.Rate\" type=\"text\" name=\"rate\" varValue=\"rate\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("1");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertEq(new Rate("1"), (Rate)map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest19Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
//        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input c:className=\"maths.Rate\" type=\"text\" name=\"rate\" varValue=\"rate\"/></form></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input c:className=\"code.formathtml.classes.Rate\" type=\"text\" name=\"rate\" varValue=\"rate\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        BeanTwo beanTwoChanged_ = (BeanTwo) nav_.getSession().getBeans().getVal("bean_two");
        beanTwoChanged_.setRate(new Rate("2"));
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("1");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertEq(new Rate("1"), (Rate)map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest20Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE_TWO", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest21Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" varValue=\"typedString\" valueChangeEvent=\"changeText\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE_TWO", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest22Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest23Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select id=\"combo\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\" c:validator=\"validator\"/><span c:for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnum());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest24Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" id=\"combo\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\" validator=\"validator\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnum());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest25Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select id=\"combo\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnum());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest26Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\" c:validator=\"rate_val\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("on");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" checked=\"checked\" id=\"txt\" name=\"bean_two.nullableCheckbox\" type=\"checkbox\" c:validator=\"rate_val\" value=\"\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest27Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\" c:validator=\"rate_val\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.nullableCheckbox\" type=\"checkbox\" c:validator=\"rate_val\" value=\"\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest28Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\"/><input type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\"/><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"ONE_TWO\"/><span c:for=\"txt\">ONE_TWO is not a no zero rate</span><input n-i=\"1\" name=\"bean_two.nullableCheckbox\" type=\"checkbox\" value=\"\"/><select n-i=\"2\" c:className=\"code.formathtml.classes.EnumNumber\" name=\"bean_two.chosenNumber\"><option value=\"ONE\">ONE</option><option value=\"TWO\">TWO</option><option value=\"THREE\">THREE</option></select></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest29Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\"/><input type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\"/><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"ONE_TWO\"/><span c:for=\"txt\">ONE_TWO is not a no zero rate</span><input n-i=\"1\" name=\"bean_two.nullableCheckbox\" type=\"checkbox\" value=\"\"/><select n-i=\"2\" c:className=\"code.formathtml.classes.EnumNumber\" name=\"bean_two.chosenNumber\"><option value=\"ONE\">ONE</option><option selected=\"selected\" value=\"TWO\">TWO</option><option value=\"THREE\">THREE</option></select></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest30Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"number\" name=\"nullableInt\" c:varValue=\"nullableInt\" c:validator=\"rate_val\"/><span c:for=\"txt\"/><input type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\"/><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.nullableInt\" type=\"number\" c:validator=\"rate_val\" value=\"2\"/><span c:for=\"txt\">2 is not a no zero rate</span><input n-i=\"1\" name=\"bean_two.nullableCheckbox\" type=\"checkbox\" value=\"\"/><select n-i=\"2\" c:className=\"code.formathtml.classes.EnumNumber\" name=\"bean_two.chosenNumber\"><option value=\"ONE\">ONE</option><option selected=\"selected\" value=\"TWO\">TWO</option><option value=\"THREE\">THREE</option></select></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest31Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"range\" name=\"nullableInt\" c:varValue=\"nullableInt\" c:validator=\"rate_val\"/><span c:for=\"txt\"/><input type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\"/><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.nullableInt\" type=\"range\" c:validator=\"rate_val\" value=\"2\"/><span c:for=\"txt\">2 is not a no zero rate</span><input n-i=\"1\" name=\"bean_two.nullableCheckbox\" type=\"checkbox\" value=\"\"/><select n-i=\"2\" c:className=\"code.formathtml.classes.EnumNumber\" name=\"bean_two.chosenNumber\"><option value=\"ONE\">ONE</option><option selected=\"selected\" value=\"TWO\">TWO</option><option value=\"THREE\">THREE</option></select></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest32Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"range\" name=\"nullableInt\" c:varValue=\"nullableInt\"/><input type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\"/><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(!(Boolean)map_.getVal("nullableCheckbox"));
        assertEq(2L,(Number) map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest33Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input c:className=\"code.formathtml.classes.Rate\" id=\"txt\" type=\"text\" name=\"rate\" c:varValue=\"rate\" c:validator=\"rate_val\"/><input type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\"/><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidatorEnum());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertEq(new Rate("2"),(Rate) map_.getVal("rate"));
        assertTrue(!(Boolean)map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest34Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\">DELETE</span><input id=\"checking\" type=\"text\" name=\"field\" c:varValue=\"field\" c:validator=\"rate_val\"/><span c:for=\"checking\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"TWO\"/><span c:for=\"txt\">TWO is not a no zero rate</span><input n-i=\"1\" id=\"checking\" name=\"bean_two.field\" type=\"text\" c:validator=\"rate_val\" value=\"ONE\"/><span c:for=\"checking\">ONE is not a no zero rate</span></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest35Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
//        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/><input id=\"checking\" type=\"text\" name=\"choose1_2\" c:varValue=\"choose1_2\"/></form></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/><input id=\"checking\" type=\"text\" name=\"choose\" c:varValue=\"choose\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
//        assertXMLEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/><input n-i=\"1\" id=\"checking\" name=\"bean_two.choose1_2\" type=\"text\" value=\"\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/><input n-i=\"1\" id=\"checking\" name=\"bean_two.choose\" type=\"text\" value=\"\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest36Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go(6)\"><input type=\"text\" name=\"typedString\" varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest37Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go(-6)\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go(-6)\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest38Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"page1.html\"><input type=\"text\" name=\"typedString\" varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest39Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$validate\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.validate\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest40Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$validate\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.validate\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest41Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$validate\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.validate\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
//        assertEq(8, map_.getVal("typedInt"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest42Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$validate\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/><input type=\"submit\" value=\"OK\"/></form><form c:command=\"$validate\" name=\"myform2\"><input type=\"text\" name=\"field\" c:varValue=\"field\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(1l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(1);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.validate\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/><input type=\"submit\" value=\"OK\"/></form><form n-f=\"1\" action=\"\" c:command=\"$bean_two.validate\" name=\"myform2\"><input n-i=\"0\" name=\"bean_two.field\" type=\"text\" value=\"\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertEq("", (String)map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest43Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest44Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" varValue=\"typedString\" valueChangeEvent=\"changeTextTwo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE_TWO", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest45Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("0");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"0\"/><span c:for=\"txt\">0 is unacceptable</span></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest46Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("\u00E4 %");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"\u00E4 %2\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("\u00E4 %2", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("\u00E4 %", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest47Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_two.typedString=%u0178", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("\u0178");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"\u01782\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("\u01782", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("\u0178", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest48Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" id=\"combo\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\" validator=\"validator\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnum());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.THREE, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0,(Number) map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest49Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_three\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><c:for var=\"n\" list=\"numbers\"><input type=\"radio\" name=\"index\" c:varValue=\"n;\"/></c:for><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanThree bean_ = new BeanThree();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_three", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_three.index=1", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("4");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_three", nav_.getCurrentBeanName());
//        assertXMLEqualNoPrefix("<html bean=\"bean_three\"><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input name=\"bean_three.index\" type=\"radio\" value=\"2\" varValue=\"numbers[0]\"/><input checked=\"checked\" name=\"bean_three.index\" type=\"radio\" value=\"4\" varValue=\"numbers[1]\"/><input name=\"bean_three.index\" type=\"radio\" value=\"6\" varValue=\"numbers[2]\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"2\"/><input n-i=\"0\" checked=\"checked\" name=\"bean_three.index\" type=\"radio\" value=\"4\"/><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"6\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanThree) conf_.getBeans().getVal("bean_three");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(4, bean_.getIndex());
//        assertEq(6, bean_.getIndexTwo());
        assertEq(-1, bean_.getIndexTwo());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest50Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''\nfive={0} in error";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\" c:valueMessage=\"msg_example,five\"/><span>Text</span></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"ONE_TWO\"/><span c:for=\"txt\" c:valueMessage=\"msg_example,five\">ONE_TWO in error</span><span>Text</span></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest51Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"$go\" name=\"myform\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("ONE", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest52Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"$go:\" name=\"myform\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"$bean_two.go:\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"TYPED_STRING\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("ONE", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest53Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_three\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><c:for var=\"n\" list=\"numbers\"><input type=\"radio\" name=\"index\" c:varValue=\"n;\"/></c:for><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanThree bean_ = new BeanThree();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_three", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(false);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
//        nav_.processFormRequest("bean_three.index=1", "myform");
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_three", nav_.getCurrentBeanName());
//        assertXMLEqualNoPrefix("<html bean=\"bean_three\"><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input name=\"bean_three.index\" type=\"radio\" value=\"2\" varValue=\"numbers[0]\"/><input name=\"bean_three.index\" type=\"radio\" value=\"4\" varValue=\"numbers[1]\"/><input name=\"bean_three.index\" type=\"radio\" value=\"6\" varValue=\"numbers[2]\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"2\"/><input n-i=\"0\"  name=\"bean_three.index\" type=\"radio\" value=\"4\"/><input n-i=\"0\"  name=\"bean_three.index\" type=\"radio\" value=\"6\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanThree) conf_.getBeans().getVal("bean_three");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(-1, bean_.getIndex());
        assertEq(-1, bean_.getIndexTwo());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest54Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_three\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><c:for var=\"n\" list=\"numbers\"><input type=\"radio\" name=\"index\" c:varValue=\"n;\" c:groupId=\"myradio\" c:validator=\"checkselected\"/></c:for><span c:for=\"myradio\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanThree bean_ = new BeanThree();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_three", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("checkselected", new UnselectedRadio());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(false);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
//        nav_.processFormRequest("bean_three.index=1", "myform");
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_three", nav_.getCurrentBeanName());
//        assertXMLEqualNoPrefix("<html bean=\"bean_three\"><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input name=\"bean_three.index\" type=\"radio\" value=\"2\" varValue=\"numbers[0]\" groupId=\"myradio\" validator=\"checkselected\"/><input name=\"bean_three.index\" type=\"radio\" value=\"4\" varValue=\"numbers[1]\" groupId=\"myradio\" validator=\"checkselected\"/><input name=\"bean_three.index\" type=\"radio\" value=\"6\" varValue=\"numbers[2]\" groupId=\"myradio\" validator=\"checkselected\"/><span for=\"myradio\">not selected</span><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"2\" c:groupId=\"myradio\" c:validator=\"checkselected\"/><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"4\" c:groupId=\"myradio\" c:validator=\"checkselected\"/><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"6\" c:groupId=\"myradio\" c:validator=\"checkselected\"/><span c:for=\"myradio\">not selected</span><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanThree) conf_.getBeans().getVal("bean_three");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(-1, bean_.getIndex());
        assertEq(-1, bean_.getIndexTwo());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest55Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_three\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><c:for var=\"n\" list=\"numbers\"><input type=\"radio\" name=\"index\" c:varValue=\"n;\" c:groupId=\"myradio\" c:validator=\"checkselected\"/></c:for><span c:for=\"myradio\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanThree bean_ = new BeanThree();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_three", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("checkselected", new UnselectedRadio());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("4");
        ni_.setValue(values_);
//        nav_.processFormRequest("bean_three.index=1", "myform");
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_three", nav_.getCurrentBeanName());
//        assertXMLEqualNoPrefix("<html bean=\"bean_three\"><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input name=\"bean_three.index\" type=\"radio\" value=\"2\" varValue=\"numbers[0]\" groupId=\"myradio\" validator=\"checkselected\"/><input checked=\"checked\" name=\"bean_three.index\" type=\"radio\" value=\"4\" varValue=\"numbers[1]\" groupId=\"myradio\" validator=\"checkselected\"/><input name=\"bean_three.index\" type=\"radio\" value=\"6\" varValue=\"numbers[2]\" groupId=\"myradio\" validator=\"checkselected\"/><span for=\"myradio\"> </span><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"2\" c:groupId=\"myradio\" c:validator=\"checkselected\"/><input n-i=\"0\" checked=\"checked\" name=\"bean_three.index\" type=\"radio\" value=\"4\" c:groupId=\"myradio\" c:validator=\"checkselected\"/><input n-i=\"0\" name=\"bean_three.index\" type=\"radio\" value=\"6\" c:groupId=\"myradio\" c:validator=\"checkselected\"/><span c:for=\"myradio\"> </span><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanThree) conf_.getBeans().getVal("bean_three");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(4, bean_.getIndex());
        assertEq(-1, bean_.getIndexTwo());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest56Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("\u00E4 %");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" name=\"bean_two.typedString\" type=\"text\" value=\"\u00E4 %2\"/></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("\u00E4 %2", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("\u00E4 %", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest57Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" list=\"combobox\" multiple=\"multiple\"/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(2, l_.size());
        assertEq(EnumNumber.TWO, l_.first());
        assertEq(EnumNumber.THREE, l_.last());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest58Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" list=\"combobox\" validator=\"validator\" multiple=\"multiple\" className='code.formathtml.classes.EnumNumbers'/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(2, l_.size());
        assertSame(EnumNumber.TWO, l_.first());
        assertSame(EnumNumber.THREE, l_.last());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest59Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" list=\"combobox\" validator=\"validator\" multiple=\"multiple\"/><span c:for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("FOUR");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><select n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" multiple=\"multiple\" name=\"bean_two.chosenNumbers\" c:validator=\"validator\"><option value=\"ONE\">ONE</option><option selected=\"selected\" value=\"TWO\">TWO</option><option value=\"THREE\">THREE</option><option value=\"FOUR\" selected=\"selected\">FOUR</option><option value=\"FIVE\">FIVE</option><option value=\"SIX\">SIX</option></select><span c:for=\"combo\">Bad selection</span></form></body></html>", nav_.getHtmlText());
        StringMapObject map_ = conf_.getBeans().getVal("bean_two").getForms();
        assertEq(0, map_.size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest60Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" map=\"translations\" multiple=\"multiple\"/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(2, l_.size());
        assertEq(EnumNumber.TWO, l_.first());
        assertEq(EnumNumber.THREE, l_.last());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest61Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" map=\"translations\" validator=\"validator\" multiple=\"multiple\" className='code.formathtml.classes.EnumNumbers'/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(2, l_.size());
        assertEq(EnumNumber.TWO, l_.first());
        assertEq(EnumNumber.THREE, l_.last());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest62Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" map=\"translations\" validator=\"validator\" multiple=\"multiple\"/><span c:for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("FOUR");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><select n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" multiple=\"multiple\" name=\"bean_two.chosenNumbers\" c:validator=\"validator\"><option value=\"ONE\">1</option><option selected=\"selected\" value=\"TWO\">2</option><option value=\"THREE\">3</option><option value=\"FOUR\" selected=\"selected\">4</option><option value=\"FIVE\">5</option><option value=\"SIX\">6</option></select><span c:for=\"combo\">Bad selection</span></form></body></html>", nav_.getHtmlText());
        StringMapObject map_ = conf_.getBeans().getVal("bean_two").getForms();
        assertEq(0, map_.size());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest63Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" list=\"combobox\" validator=\"validator\" multiple=\"multiple\"/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(2, l_.size());
        assertEq(EnumNumber.TWO, l_.first());
        assertEq(EnumNumber.THREE, l_.last());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest64Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" map=\"translations\" validator=\"validator\" multiple=\"multiple\"/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(2, l_.size());
        assertEq(EnumNumber.TWO, l_.first());
        assertEq(EnumNumber.THREE, l_.last());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest65Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$goTextArea\"><textarea name=\"typedString\" varValue=\"typedString\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.goTextArea", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.goTextArea").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.goTextArea").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("MY_STRING");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertNull(beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("MY_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(8, conf_.getBeans().getVal("bean_one").getForms().size());
        assertSame(map_, conf_.getBeans().getVal("bean_one").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest66Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><textarea id=\"txt\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><span c:for=\"txt\"/><input type=\"checkbox\" name=\"nullableCheckbox\" c:varValue=\"nullableCheckbox\"/><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><textarea n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" c:validator=\"rate_val\">ONE_TWO</textarea><span c:for=\"txt\">ONE_TWO is not a no zero rate</span><input n-i=\"1\" name=\"bean_two.nullableCheckbox\" type=\"checkbox\" value=\"\"/><select n-i=\"2\" c:className=\"code.formathtml.classes.EnumNumber\" name=\"bean_two.chosenNumber\"><option value=\"ONE\">ONE</option><option value=\"TWO\">TWO</option><option value=\"THREE\">THREE</option></select></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest67Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$goTextArea\"><textarea name=\"typedString\" varValue=\"typedString\" c:className=\"java.lang.String\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.goTextArea", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.goTextArea").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.goTextArea").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("MY_STRING");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertNull(beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("MY_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(8, conf_.getBeans().getVal("bean_one").getForms().size());
        assertSame(map_, conf_.getBeans().getVal("bean_one").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest68Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$goTextArea\"><textarea id=\"my_text_area\" name=\"typedString\" varValue=\"typedString\" c:className=\"java.lang.String\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.goTextArea", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.goTextArea").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.goTextArea").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("MY_STRING");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertNull(beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
        assertEq("MY_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(8, conf_.getBeans().getVal("bean_one").getForms().size());
        assertSame(map_, conf_.getBeans().getVal("bean_one").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest69Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$goTextArea\"><textarea varValue=\"typedString\" c:className=\"java.lang.String\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnums());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.goTextArea", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.goTextArea").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.goTextArea").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertNull(beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(8, map_.size());
        assertTrue(!(Boolean)map_.getVal("checked"));
//        assertEq("MY_STRING", map_.getVal("typedString"));
        assertEq("TYPED_STRING", (String)map_.getVal("typedString"));
        assertEq(EnumNumber.TWO, (EnumNumber) map_.getVal("chosenNumber"));
        assertEq(0, (Number)map_.getVal("typedInt"));
        assertTrue(map_.contains("rate"));
        assertNull( map_.getVal("rate"));
        assertTrue(map_.contains("nullableCheckbox"));
        assertNull( map_.getVal("nullableCheckbox"));
        assertTrue(map_.contains("nullableInt"));
        assertNull( map_.getVal("nullableInt"));
        assertTrue(map_.contains("field"));
        assertNull( map_.getVal("field"));
        assertEq(8, conf_.getBeans().getVal("bean_one").getForms().size());
        assertSame(map_, conf_.getBeans().getVal("bean_one").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest70Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_six\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumThree\" value=\"ONE\"/><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumThree\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSix bean_ = new BeanSix();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_six", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_three.index=1", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(false);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_six", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumThree\" value=\"ONE\"/><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumThree\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSix) conf_.getBeans().getVal("bean_six");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertNull(bean_.getMyEnumOne());
        assertEq(EnumNumber.ONE, bean_.getMyEnumTwo());
        assertEq(EnumNumber.FOUR, bean_.getMyEnumThree());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest71Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_six\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumOne\" value=\"ONE\"/><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumOne\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSix bean_ = new BeanSix();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_six", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_three.index=1", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(false);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_six", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumOne\" value=\"ONE\"/><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumOne\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSix) conf_.getBeans().getVal("bean_six");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertNull(bean_.getMyEnumOne());
        assertEq(EnumNumber.ONE, bean_.getMyEnumTwo());
        assertEq(EnumNumber.FOUR, bean_.getMyEnumThree());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest72Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_six\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumTwo\" value=\"ONE\"/><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumTwo\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSix bean_ = new BeanSix();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_six", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_three.index=1", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(false);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_six", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" checked=\"checked\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumTwo\" value=\"ONE\"/><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumTwo\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSix) conf_.getBeans().getVal("bean_six");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertNull(bean_.getMyEnumOne());
        assertEq(EnumNumber.ONE, bean_.getMyEnumTwo());
        assertEq(EnumNumber.FOUR, bean_.getMyEnumThree());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest73Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" list=\"combobox\" multiple=\"multiple\"/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(0, l_.size());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest74Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumbers\" id=\"combo\" default=\"ONE,FOUR\" name=\"chosenNumbers\" varValue=\"chosenNumbers\" list=\"combobox\" multiple=\"multiple\"/><span c:for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        EnumNumbers l_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(0, l_.size());
        assertTrue(map_.contains("chosenNumbersNull"));
        assertNull(map_.getVal("chosenNumbersNull"));
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest75Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_six\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumThree\" value=\"ONE\"/><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumThree\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSix bean_ = new BeanSix();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_six", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_three.index=1", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_six", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumThree\" value=\"ONE\"/><input n-i=\"0\" checked=\"checked\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumThree\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSix) conf_.getBeans().getVal("bean_six");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertNull(bean_.getMyEnumOne());
        assertEq(EnumNumber.ONE, bean_.getMyEnumTwo());
        assertEq(EnumNumber.TWO, bean_.getMyEnumThree());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest76Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_six\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumOne\" value=\"ONE\"/><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumOne\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSix bean_ = new BeanSix();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_six", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_three.index=1", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_six", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumOne\" value=\"ONE\"/><input n-i=\"0\" checked=\"checked\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumOne\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSix) conf_.getBeans().getVal("bean_six");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(EnumNumber.TWO, bean_.getMyEnumOne());
        assertEq(EnumNumber.ONE, bean_.getMyEnumTwo());
        assertEq(EnumNumber.FOUR, bean_.getMyEnumThree());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest77Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_six\" xmlns:c='javahtml'><body>HEAD<form action=\"\" c:command=\"page1.html\" name=\"myform\"><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumTwo\" value=\"ONE\"/><input c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"myEnumTwo\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSix bean_ = new BeanSix();
        //bean_.setClassName(BeanThree.class.getName());
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_six", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_three.index=1", "myform");
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_six", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<form n-f=\"0\" action=\"\" c:command=\"page1.html\" name=\"myform\"><input n-i=\"0\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumTwo\" value=\"ONE\"/><input n-i=\"0\" checked=\"checked\" c:className=\"code.formathtml.classes.EnumNumber\" type=\"radio\" name=\"bean_six.myEnumTwo\" value=\"TWO\"/><input type=\"submit\" value=\"OK\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSix) conf_.getBeans().getVal("bean_six");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertNull(bean_.getMyEnumOne());
        assertEq(EnumNumber.TWO, bean_.getMyEnumTwo());
        assertEq(EnumNumber.FOUR, bean_.getMyEnumThree());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest78Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body><form name=\"myform\" c:command=\"$validateStrings\"><c:for var=\"c\" list=\"getComposites()\" className='code.formathtml.classes.Composite'><input type=\"text\" name=\"c;getString()\" c:varMethod=\"setString\" c:varValue=\"c;getString()\"/></c:for></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanOne bean_ = new BeanOne();
        bean_.setScope("session");
        bean_.getComposite().getStrings().add("FIRST");
        bean_.getComposite().getStrings().add("SECOND");
        bean_.getComposite().setInteger(5);
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_one.getComposites()[0].getString()=ONE&bean_one.getComposites()[1].getString()=TWO", "myform");
//        assertXMLEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.getComposites()[0].getString()\" varMethod=\"setString\" value=\"0\" varValue=\"c;getString()\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.getComposites()[1].getString()\" varMethod=\"setString\" value=\"1\" varValue=\"c;getString()\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"0\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"1\"/></form></body></html>", nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
//        Document doc_ = XmlParser.parseSaxHtml(html_);
//        String render_ = FormatHtml.processHtml(doc_, "bean_one", conf_, locale_, files_);
//        assertXMLEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.getComposites()[0].getString()\" varMethod=\"setString\" value=\"ONE\" varValue=\"c;getString()\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.getComposites()[1].getString()\" varMethod=\"setString\" value=\"TWO\" varValue=\"c;getString()\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"ONE\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"TWO\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq("ONE", bean_.getComposites().get(0).getString());
        assertEq("TWO", bean_.getComposites().get(1).getString());
        StringList res_ = bean_.getStrings();
        assertEq(2, res_.size());
        assertEq("ONE", res_.get(0));
        assertEq("TWO", res_.get(1));
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest79Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body><form name=\"myform\" c:command=\"$validateStrings\"><c:for var=\"c\" list=\"getComposites()\" className='code.formathtml.classes.Composite'><input type=\"text\" name=\"c;getString()\" c:varMethod=\"setString\" c:varValue=\"c;getString()\" c:className=\"java.lang.String\"/></c:for></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanOne bean_ = new BeanOne();
        bean_.setScope("session");
        bean_.getComposite().getStrings().add("FIRST");
        bean_.getComposite().getStrings().add("SECOND");
        bean_.getComposite().setInteger(5);
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        nav_.processFormRequest("bean_one.getComposites()[0].getString()=ONE&bean_one.getComposites()[1].getString()=TWO", "myform");
//        assertXMLEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.getComposites()[0].getString()\" varMethod=\"setString\" value=\"0\" varValue=\"c;getString()\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.getComposites()[1].getString()\" varMethod=\"setString\" value=\"1\" varValue=\"c;getString()\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"0\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"1\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
//        Document doc_ = XmlParser.parseSaxHtml(html_);
//        String render_ = FormatHtml.processHtml(doc_, "bean_one", conf_, locale_, files_);
//        assertXMLEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.getComposites()[0].getString()\" varMethod=\"setString\" value=\"ONE\" varValue=\"c;getString()\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.getComposites()[1].getString()\" varMethod=\"setString\" value=\"TWO\" varValue=\"c;getString()\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_one.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"ONE\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_one.c;getString()\" c:varMethod=\"setString\" value=\"TWO\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq("ONE", bean_.getComposites().get(0).getString());
        assertEq("TWO", bean_.getComposites().get(1).getString());
        StringList res_ = bean_.getStrings();
        assertEq(2, res_.size());
        assertEq("ONE", res_.get(0));
        assertEq("TWO", res_.get(1));
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest80Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        String html_ = "<html c:bean=\"bean_seven\" xmlns:c='javahtml'><body><form name=\"myform\" c:command=\"$validateStrings\"><c:for var=\"c\" list=\"getStrings()\"><input type=\"text\" name=\"c;\" c:varValue=\"c;\" c:className=\"java.lang.String\"/></c:for></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSeven bean_ = new BeanSeven();
        bean_.setScope("session");
        bean_.getComposite().getStrings().add("FIRST");
        bean_.getComposite().getStrings().add("SECOND");
        bean_.getComposite().setInteger(5);
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getStrings()[0]\" value=\"FIRST\" varValue=\"c;\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getStrings()[1]\" value=\"SECOND\" varValue=\"c;\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.c;\" value=\"FIRST\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.c;\" value=\"SECOND\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
//        Document doc_ = XmlParser.parseSaxHtml(html_);
//        String render_ = FormatHtml.processHtml(doc_, "bean_one", conf_, locale_, files_);
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getStrings()[0]\" value=\"ONE\" varValue=\"c;\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getStrings()[1]\" value=\"TWO\" varValue=\"c;\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStrings\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.c;\" value=\"ONE\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.c;\" value=\"TWO\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSeven) conf_.getBeans().getVal("bean_seven");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
//        assertEq(new StringList("ONE","TWO"), map_.getVal("strings"));
        assertEq("ONE", bean_.getStrings().get(0));
        assertEq("TWO", bean_.getStrings().get(1));
        StringList res_ = bean_.getStrings();
        assertEq(2, res_.size());
        assertEq("ONE", res_.get(0));
        assertEq("TWO", res_.get(1));
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest81Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        String html_ = "<html c:bean=\"bean_seven\" xmlns:c='javahtml'><body><form name=\"myform\" c:command=\"$validateStringsSave\"><c:for var=\"c\" list=\"getStrings()\"><input type=\"text\" name=\"c;\" c:varValue=\"c;\" c:className=\"java.lang.String\"/></c:for></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSeven bean_ = new BeanSeven();
        bean_.setScope("session");
        bean_.getComposite().getStrings().add("FIRST");
        bean_.getComposite().getStrings().add("SECOND");
        bean_.getComposite().setInteger(5);
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStringsSave\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getStrings()[0]\" value=\"FIRST\" varValue=\"c;\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getStrings()[1]\" value=\"SECOND\" varValue=\"c;\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStringsSave\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.c;\" value=\"FIRST\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.c;\" value=\"SECOND\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
//        Document doc_ = XmlParser.parseSaxHtml(html_);
//        String render_ = FormatHtml.processHtml(doc_, "bean_one", conf_, locale_, files_);
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStringsSave\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getStrings()[0]\" value=\"ONE\" varValue=\"c;\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getStrings()[1]\" value=\"TWO\" varValue=\"c;\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateStringsSave\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.c;\" value=\"ONE\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.c;\" value=\"TWO\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSeven) conf_.getBeans().getVal("bean_seven");
        StringMapObject map_ = bean_.getForms();
        assertEq(1, map_.size());
        assertEq(new StringList("ONE","TWO"), (StringList)map_.getVal("strings"));
        assertEq("ONE", bean_.getStrings().get(0));
        assertEq("TWO", bean_.getStrings().get(1));
        StringList res_ = bean_.getStrings();
        assertEq(2, res_.size());
        assertEq("ONE", res_.get(0));
        assertEq("TWO", res_.get(1));
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest82Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        String html_ = "<html c:bean=\"bean_seven\" xmlns:c='javahtml'><body><form name=\"myform\" c:command=\"$validateMap\"><c:for key=\"k\" value=\"v\" map=\"getTree()\"><input type=\"text\" name=\"v;\" c:varValue=\"v;\" c:className=\"java.lang.Integer\"/></c:for></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSeven bean_ = new BeanSeven();
        bean_.setScope("session");
        bean_.getComposite().getStrings().add("FIRST");
        bean_.getComposite().getStrings().add("SECOND");
        bean_.getComposite().setInteger(5);
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getTree()[0]goto!value\" value=\"1\" varValue=\"v;\" c:className=\"java.lang.Integer\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getTree()[1]goto!value\" value=\"2\" varValue=\"v;\" c:className=\"java.lang.Integer\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.v;\" value=\"1\" c:className=\"java.lang.Integer\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.v;\" value=\"2\" c:className=\"java.lang.Integer\"/></form></body></html>", nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("3");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("4");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
//        Document doc_ = XmlParser.parseSaxHtml(html_);
//        String render_ = FormatHtml.processHtml(doc_, "bean_one", conf_, locale_, files_);
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getTree()[0]goto!value\" value=\"3\" varValue=\"v;\" c:className=\"java.lang.Integer\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getTree()[1]goto!value\" value=\"4\" varValue=\"v;\" c:className=\"java.lang.Integer\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.v;\" value=\"3\" c:className=\"java.lang.Integer\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.v;\" value=\"4\" c:className=\"java.lang.Integer\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSeven) conf_.getBeans().getVal("bean_seven");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(2, bean_.getTree().size());
        assertEq(3, bean_.getTree().getVal("keyone").intValue());
        assertEq(4, bean_.getTree().getVal("keytwo").intValue());
        StringList res_ = bean_.getStrings();
        assertEq(2, res_.size());
        assertEq("FIRST", res_.get(0));
        assertEq("SECOND", res_.get(1));
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest83Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input id=\"txt\" type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:validator=\"rate_val\"/><input type=\"radio\" name=\"chosenNumber\" c:className=\"code.formathtml.classes.EnumNumber\" value=\"ONE\"/><input type=\"radio\" name=\"chosenNumber\" c:className=\"code.formathtml.classes.EnumNumber\" value=\"TWO\"/><span c:for=\"txt\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("rate_val", new MyValidator());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE_TWO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page2.html", nav_.getCurrentUrl());
        assertEq("bean_two", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" c:command=\"$bean_two.go\" name=\"myform\"><input n-i=\"0\" id=\"txt\" name=\"bean_two.typedString\" type=\"text\" c:validator=\"rate_val\" value=\"ONE_TWO\"/><input n-i=\"1\" checked=\"checked\" type=\"radio\" name=\"bean_two.chosenNumber\" c:className=\"code.formathtml.classes.EnumNumber\" value=\"ONE\"/><input n-i=\"1\" type=\"radio\" name=\"bean_two.chosenNumber\" c:className=\"code.formathtml.classes.EnumNumber\" value=\"TWO\"/><span c:for=\"txt\">ONE_TWO is not a no zero rate</span></form></body></html>", nav_.getHtmlText());
        beanTwo_ = (BeanTwo) conf_.getBeans().getVal("bean_two");
        assertEq(EnumNumber.TWO, beanTwo_.getChosenNumber());
        assertEq("TYPED_STRING", beanTwo_.getTypedString());
        StringMapObject map_ = beanTwo_.getForms();
        assertEq(0, map_.size());
        assertEq(0, conf_.getBeans().getVal("bean_one").getForms().size());
        assertEq(0, conf_.getBeans().getVal("bean_two").getForms().size());
        assertNotSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest84Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        String html_ = "<html c:bean=\"bean_seven\" xmlns:c='javahtml'><body><form name=\"myform\" c:command=\"$validateMap\"><c:for key=\"k\" value=\"v\" map=\"getTree()\"><input type=\"text\" name=\"k;\" c:varValue=\"k;\" c:className=\"java.lang.String\"/></c:for></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSeven bean_ = new BeanSeven();
        bean_.setScope("session");
        bean_.getComposite().getStrings().add("FIRST");
        bean_.getComposite().getStrings().add("SECOND");
        bean_.getComposite().setInteger(5);
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getTree()[0]goto!key\" value=\"keyone\" varValue=\"k;\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getTree()[1]goto!key\" value=\"keytwo\" varValue=\"k;\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.k;\" value=\"keyone\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.k;\" value=\"keytwo\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("keythree");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("keyfour");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
//        Document doc_ = XmlParser.parseSaxHtml(html_);
//        String render_ = FormatHtml.processHtml(doc_, "bean_one", conf_, locale_, files_);
//        assertXMLEqualNoPrefix("<html bean=\"bean_seven\"><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.getTree()[0]goto!key\" value=\"keyfour\" varValue=\"k;\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.getTree()[1]goto!key\" value=\"keythree\" varValue=\"k;\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form n-f=\"0\" action=\"\" name=\"myform\" c:command=\"$bean_seven.validateMap\"><input n-i=\"0\" type=\"text\" name=\"bean_seven.k;\" value=\"keyfour\" c:className=\"java.lang.String\"/><input n-i=\"1\" type=\"text\" name=\"bean_seven.k;\" value=\"keythree\" c:className=\"java.lang.String\"/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSeven) conf_.getBeans().getVal("bean_seven");
        StringMapObject map_ = bean_.getForms();
        assertEq(0, map_.size());
        assertEq(2, bean_.getTree().size());
        assertEq(1, bean_.getTree().getVal("keythree").intValue());
        assertEq(2, bean_.getTree().getVal("keyfour").intValue());
        StringList res_ = bean_.getStrings();
        assertEq(2, res_.size());
        assertEq("FIRST", res_.get(0));
        assertEq("SECOND", res_.get(1));
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }


    @Test
    public void processFormRequest85Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        String html_ = "<html c:bean=\"bean_seven\" xmlns:c='javahtml'><body><form name='myform' c:command=\"$validateIntsSave\"><c:for var=\"i\" list=\"arrayInt\"><input type=\"text\" c:className=\"java.lang.Integer\" name=\"i;\" c:varValue=\"i;\"/></c:for></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        BeanSeven bean_ = new BeanSeven();
        bean_.setScope("session");
        bean_.getComposite().getStrings().add("FIRST");
        bean_.getComposite().getStrings().add("SECOND");
        bean_.getComposite().setInteger(5);
        bean_.getComposites().get(0).setStrings(new StringList("F"));
        bean_.getComposites().get(1).setStrings(new StringList("S"));
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setMathFactory(new SimpleMathFactory());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form name='myform' n-f='0' action='' c:command='$bean_seven.validateIntsSave'><input n-i='0' type='text' c:className='java.lang.Integer' name='bean_seven.i;' value='1'/><input n-i='1' type='text' c:className='java.lang.Integer' name='bean_seven.i;' value='3'/></form></body></html>", nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("4");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body><form name='myform' n-f='0' action='' c:command='$bean_seven.validateIntsSave'><input n-i='0' type='text' c:className='java.lang.Integer' name='bean_seven.i;' value='2'/><input n-i='1' type='text' c:className='java.lang.Integer' name='bean_seven.i;' value='4'/></form></body></html>", nav_.getHtmlText());
        bean_ = (BeanSeven) conf_.getBeans().getVal("bean_seven");
        StringMapObject map_ = bean_.getForms();
        assertEq(1, map_.size());
        Ints savedNbs_ = (Ints) map_.getVal("numbers");
        assertEq(2, savedNbs_.size());
        assertEq(2, savedNbs_.get(0).intValue());
        assertEq(4, savedNbs_.get(1).intValue());
        StringList res_ = bean_.getStrings();
        assertEq(2, res_.size());
        assertEq("FIRST", res_.get(0));
        assertEq("SECOND", res_.get(1));
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest86Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        StringBuilder html_ = new StringBuilder("<html c:bean=\"bean_seven\" xmlns:c='javahtml'>");
        html_.append("<body>");
        html_.append("<form name='myform' c:command='$setup'>");
        html_.append("<input type=\"radio\" c:className='$long' name='getRadioLong()' c:varValue='1' c:varMethod='setRadioLong'/>");
        html_.append("<input type=\"radio\" c:className='$long' name='getRadioLong()' c:varValue='2' c:varMethod='setRadioLong'/>");
        html_.append("<input type=\"text\" c:className='java.lang.String' name='getTypedString()' c:varMethod='setTypedString'/>");
        html_.append("<input type=\"checkbox\" c:className='$boolean' name='isCheckBox()' c:varMethod='setCheckBox'/>");
        html_.append("<c:select className='code.formathtml.classes.EnumNumber' list='getCombobox()' name='getComboNumber()' varMethod='setComboNumber' varValue='getComboNumber()'/>");
        html_.append("<c:select className='code.formathtml.classes.EnumNumbers' list='getCombobox()' multiple='' name='getComboNumbers()' varMethod='setComboNumbers' varValue='getComboNumbers()'/>");
        html_.append("<textarea c:className='java.lang.String' name='getTypedText()' c:varMethod='setTypedText'/>");
        html_.append("<c:select className='code.formathtml.classes.EnumNumber' map='getComboboxMap()' name='getComboNumberTwo()' varMethod='setComboNumberTwo' varValue='getComboNumberTwo()'/>");
        html_.append("</form><br/>{getDataBase().getValue()}");
        html_.append("</body>");
        html_.append("</html>");
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_.toString());
        BeanEight bean_ = new BeanEight();
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setMathFactory(new SimpleMathFactory());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_seven.setup", new StringMap<String>());
        conf_.getNavigation().getVal("bean_seven.setup").put("change", "page1.html");
        SimpleDataBase d_ = new SimpleDataBase();
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.setDataBase(d_);
        nav_.getSession().setDataBaseClassName("code.formathtml.classes.SimpleDataBase");
        nav_.initializeSession();
        StringBuilder res_ = new StringBuilder();
        res_.append("<html xmlns:c='javahtml'>");
        res_.append("<body>");
        res_.append("<form action='' c:command='$bean_seven.setup' n-f='0' name='myform'>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='0' name='bean_seven.getRadioLong()' type='radio' value='1'/>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='0' name='bean_seven.getRadioLong()' type='radio' value='2'/>");
        res_.append("<input type=\"text\" c:className='java.lang.String' n-i='1' name='bean_seven.getTypedString()' c:varMethod='setTypedString'/>");
        res_.append("<input type=\"checkbox\" c:className='$boolean' n-i='2' name='bean_seven.isCheckBox()' c:varMethod='setCheckBox'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.getComboNumber()' n-i='3' c:varMethod='setComboNumber'>");
        res_.append("<option value='ONE' selected='selected'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumbers' multiple='multiple' name='bean_seven.getComboNumbers()' n-i='4' c:varMethod='setComboNumbers'>");
        res_.append("<option value='ONE' selected='selected'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR' selected='selected'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<textarea c:className='java.lang.String' n-i='5' name='bean_seven.getTypedText()' c:varMethod='setTypedText'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.getComboNumberTwo()' n-i='6' c:varMethod='setComboNumberTwo'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE' selected='selected'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("</form><br/>8");
        res_.append("</body>");
        res_.append("</html>");
        assertXmlEqualNoPrefix(res_.toString(), nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("HELLO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("on");
        ni_.setValue(values_);
        nc_ = containers_.getVal(3l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(4l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nc_ = containers_.getVal(5l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("Some Text");
        ni_.setValue(values_);
        nc_ = containers_.getVal(6l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("FOUR");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        res_ = new StringBuilder("");
        res_.append("<html xmlns:c='javahtml'>");
        res_.append("<body>");
        res_.append("<form action='' c:command='$bean_seven.setup' n-f='0' name='myform'>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='0' name='bean_seven.getRadioLong()' type='radio' value='1'/>");
        res_.append("<input c:className='$long' checked='checked' c:varMethod='setRadioLong' n-i='0' name='bean_seven.getRadioLong()' type='radio' value='2'/>");
        res_.append("<input type=\"text\" c:className='java.lang.String' n-i='1' name='bean_seven.getTypedString()' c:varMethod='setTypedString'/>");
        res_.append("<input type=\"checkbox\" c:className='$boolean' n-i='2' name='bean_seven.isCheckBox()' c:varMethod='setCheckBox'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.getComboNumber()' n-i='3' c:varMethod='setComboNumber'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO' selected='selected'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumbers' multiple='multiple' name='bean_seven.getComboNumbers()' n-i='4' c:varMethod='setComboNumbers'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO' selected='selected'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE' selected='selected'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<textarea c:className='java.lang.String' n-i='5' name='bean_seven.getTypedText()' c:varMethod='setTypedText'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.getComboNumberTwo()' n-i='6' c:varMethod='setComboNumberTwo'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR' selected='selected'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("</form><br/>8");
        res_.append("</body>");
        res_.append("</html>");
        assertXmlEqualNoPrefix(res_.toString(), nav_.getHtmlText());
        bean_ = (BeanEight) conf_.getBeans().getVal("bean_seven");
        assertEq(2, bean_.getRadioLong());
        assertEq("HELLO", bean_.getTypedString());
        assertSame(EnumNumber.TWO, bean_.getComboNumber());
        assertTrue(bean_.isCheckBox());
        EnumNumbers list_ = bean_.getComboNumbers();
        assertEq(2, list_.size());
        assertSame(EnumNumber.TWO, list_.get(0));
        assertSame(EnumNumber.THREE, list_.get(1));
        assertEq("Some Text", bean_.getTypedText());
        assertSame(EnumNumber.FOUR, bean_.getComboNumberTwo());
    }


    @Test
    public void processFormRequest87Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description two\nthree=desc &lt;{0}&gt;";
        StringBuilder html_ = new StringBuilder("<html c:bean=\"bean_seven\" xmlns:c='javahtml'>");
        html_.append("<body>");
        html_.append("<form name='myform' c:command='$setup'>");
        html_.append("<c:for className='code.formathtml.classes.EncapsFields' var='c' list='getComposites()'>");
        html_.append("<input type=\"radio\" c:className='$long' name='c;getRadioLong()' c:varValue='1' c:varMethod='setRadioLong'/>");
        html_.append("<input type=\"radio\" c:className='$long' name='c;getRadioLong()' c:varValue='2' c:varMethod='setRadioLong'/>");
        html_.append("<input type=\"text\" c:className='java.lang.String' name='c;getTypedString()' c:varMethod='setTypedString'/>");
        html_.append("<input type=\"checkbox\" c:className='$boolean' name='c;isCheckBox()' c:varMethod='setCheckBox'/>");
        html_.append("<c:select className='code.formathtml.classes.EnumNumber' list='getCombobox()' name='c;getComboNumber()' varMethod='setComboNumber' varValue='c;getComboNumber()'/>");
        html_.append("<c:select className='code.formathtml.classes.EnumNumbers' list='getCombobox()' multiple='' name='c;getComboNumbers()' varMethod='setComboNumbers' varValue='c;getComboNumbers()'/>");
        html_.append("<textarea c:className='java.lang.String' name='c;getTypedText()' c:varMethod='setTypedText'/>");
        html_.append("<c:select className='code.formathtml.classes.EnumNumber' map='getComboboxMap()' name='c;getComboNumberTwo()' varMethod='setComboNumberTwo' varValue='c;getComboNumberTwo()'/>");
        html_.append("</c:for>");
        html_.append("</form>");
        html_.append("</body>");
        html_.append("</html>");
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_.toString());
        BeanEight bean_ = new BeanEight();
        bean_.setScope("session");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_seven", bean_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page1.html");
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setMathFactory(new SimpleMathFactory());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_seven.setup", new StringMap<String>());
        conf_.getNavigation().getVal("bean_seven.setup").put("change", "page1.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        StringBuilder res_ = new StringBuilder("");
        res_.append("<html xmlns:c='javahtml'>");
        res_.append("<body>");
        res_.append("<form action='' c:command='$bean_seven.setup' n-f='0' name='myform'>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='0' name='bean_seven.c;getRadioLong()' type='radio' value='1'/>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='0' name='bean_seven.c;getRadioLong()' type='radio' value='2'/>");
        res_.append("<input type=\"text\" c:className='java.lang.String' n-i='1' name='bean_seven.c;getTypedString()' c:varMethod='setTypedString'/>");
        res_.append("<input type=\"checkbox\" c:className='$boolean' n-i='2' name='bean_seven.c;isCheckBox()' c:varMethod='setCheckBox'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumber()' n-i='3' c:varMethod='setComboNumber'>");
        res_.append("<option value='ONE' selected='selected'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumbers' multiple='multiple' name='bean_seven.c;getComboNumbers()' n-i='4' c:varMethod='setComboNumbers'>");
        res_.append("<option value='ONE' selected='selected'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR' selected='selected'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<textarea c:className='java.lang.String' n-i='5' name='bean_seven.c;getTypedText()' c:varMethod='setTypedText'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumberTwo()' n-i='6' c:varMethod='setComboNumberTwo'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE' selected='selected'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='7' name='bean_seven.c;getRadioLong()' type='radio' value='1'/>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='7' name='bean_seven.c;getRadioLong()' type='radio' value='2'/>");
        res_.append("<input type=\"text\" c:className='java.lang.String' n-i='8' name='bean_seven.c;getTypedString()' c:varMethod='setTypedString'/>");
        res_.append("<input type=\"checkbox\" c:className='$boolean' n-i='9' name='bean_seven.c;isCheckBox()' c:varMethod='setCheckBox'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumber()' n-i='10' c:varMethod='setComboNumber'>");
        res_.append("<option value='ONE' selected='selected'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumbers' multiple='multiple' name='bean_seven.c;getComboNumbers()' n-i='11' c:varMethod='setComboNumbers'>");
        res_.append("<option value='ONE' selected='selected'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR' selected='selected'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<textarea c:className='java.lang.String' n-i='12' name='bean_seven.c;getTypedText()' c:varMethod='setTypedText'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumberTwo()' n-i='13' c:varMethod='setComboNumberTwo'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE' selected='selected'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("</form>");
        res_.append("</body>");
        res_.append("</html>");
        assertXmlEqualNoPrefix(res_.toString(), nav_.getHtmlText());
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(1l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("HELLO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(2l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("on");
        ni_.setValue(values_);
        nc_ = containers_.getVal(3l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        ni_.setValue(values_);
        nc_ = containers_.getVal(4l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nc_ = containers_.getVal(5l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("Some Text");
        ni_.setValue(values_);
        nc_ = containers_.getVal(6l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("FOUR");
        ni_.setValue(values_);
        nc_ = containers_.getVal(7l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("1");
        ni_.setValue(values_);
        nc_ = containers_.getVal(8l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("WORLD");
        ni_.setValue(values_);
        nc_ = containers_.getVal(9l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("off");
        ni_.setValue(values_);
        nc_ = containers_.getVal(10l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("SIX");
        ni_.setValue(values_);
        nc_ = containers_.getVal(11l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("SIX");
        ni_.setValue(values_);
        nc_ = containers_.getVal(12l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("Some Text 2");
        ni_.setValue(values_);
        nc_ = containers_.getVal(13l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("FIVE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        res_ = new StringBuilder("");
        res_.append("<html xmlns:c='javahtml'>");
        res_.append("<body>");
        res_.append("<form action='' c:command='$bean_seven.setup' n-f='0' name='myform'>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='0' name='bean_seven.c;getRadioLong()' type='radio' value='1'/>");
        res_.append("<input c:className='$long' checked='checked' c:varMethod='setRadioLong' n-i='0' name='bean_seven.c;getRadioLong()' type='radio' value='2'/>");
        res_.append("<input type=\"text\" c:className='java.lang.String' n-i='1' name='bean_seven.c;getTypedString()' c:varMethod='setTypedString'/>");
        res_.append("<input type=\"checkbox\" c:className='$boolean' n-i='2' name='bean_seven.c;isCheckBox()' c:varMethod='setCheckBox'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumber()' n-i='3' c:varMethod='setComboNumber'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO' selected='selected'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumbers' multiple='multiple' name='bean_seven.c;getComboNumbers()' n-i='4' c:varMethod='setComboNumbers'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO' selected='selected'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE' selected='selected'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<textarea c:className='java.lang.String' n-i='5' name='bean_seven.c;getTypedText()' c:varMethod='setTypedText'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumberTwo()' n-i='6' c:varMethod='setComboNumberTwo'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR' selected='selected'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<input c:className='$long' checked='checked' c:varMethod='setRadioLong' n-i='7' name='bean_seven.c;getRadioLong()' type='radio' value='1'/>");
        res_.append("<input c:className='$long' c:varMethod='setRadioLong' n-i='7' name='bean_seven.c;getRadioLong()' type='radio' value='2'/>");
        res_.append("<input type=\"text\" c:className='java.lang.String' n-i='8' name='bean_seven.c;getTypedString()' c:varMethod='setTypedString'/>");
        res_.append("<input type=\"checkbox\" c:className='$boolean' n-i='9' name='bean_seven.c;isCheckBox()' c:varMethod='setCheckBox'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumber()' n-i='10' c:varMethod='setComboNumber'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX' selected='selected'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumbers' multiple='multiple' name='bean_seven.c;getComboNumbers()' n-i='11' c:varMethod='setComboNumbers'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO' selected='selected'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX' selected='selected'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("<textarea c:className='java.lang.String' n-i='12' name='bean_seven.c;getTypedText()' c:varMethod='setTypedText'/>");
        res_.append("<select c:className='code.formathtml.classes.EnumNumber' name='bean_seven.c;getComboNumberTwo()' n-i='13' c:varMethod='setComboNumberTwo'>");
        res_.append("<option value='ONE'>");
        res_.append("ONE");
        res_.append("</option>");
        res_.append("<option value='TWO'>");
        res_.append("TWO");
        res_.append("</option>");
        res_.append("<option value='THREE'>");
        res_.append("THREE");
        res_.append("</option>");
        res_.append("<option value='FOUR'>");
        res_.append("FOUR");
        res_.append("</option>");
        res_.append("<option value='FIVE' selected='selected'>");
        res_.append("FIVE");
        res_.append("</option>");
        res_.append("<option value='SIX'>");
        res_.append("SIX");
        res_.append("</option>");
        res_.append("</select>");
        res_.append("</form>");
        res_.append("</body>");
        res_.append("</html>");
        assertXmlEqualNoPrefix(res_.toString(), nav_.getHtmlText());
        bean_ = (BeanEight) conf_.getBeans().getVal("bean_seven");
        assertEq(2, bean_.getComposites().get(0).getRadioLong());
        assertEq("HELLO", bean_.getComposites().get(0).getTypedString());
        assertSame(EnumNumber.TWO, bean_.getComposites().get(0).getComboNumber());
        assertTrue(bean_.getComposites().get(0).isCheckBox());
        EnumNumbers list_ = bean_.getComposites().get(0).getComboNumbers();
        assertEq(2, list_.size());
        assertSame(EnumNumber.TWO, list_.get(0));
        assertSame(EnumNumber.THREE, list_.get(1));
        assertEq("Some Text", bean_.getComposites().get(0).getTypedText());
        assertSame(EnumNumber.FOUR, bean_.getComposites().get(0).getComboNumberTwo());
        assertEq(1, bean_.getComposites().get(1).getRadioLong());
        assertEq("WORLD", bean_.getComposites().get(1).getTypedString());
        assertSame(EnumNumber.SIX, bean_.getComposites().get(1).getComboNumber());
        assertTrue(!bean_.getComposites().get(1).isCheckBox());
        list_ = bean_.getComposites().get(1).getComboNumbers();
        assertEq(2, list_.size());
        assertSame(EnumNumber.TWO, list_.get(0));
        assertSame(EnumNumber.SIX, list_.get(1));
        assertEq("Some Text 2", bean_.getComposites().get(1).getTypedText());
        assertSame(EnumNumber.FIVE, bean_.getComposites().get(1).getComboNumberTwo());
    }

    @Test
    public void processFormRequest88Test() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select id=\"combo\" name=\"chosenNumbersNull\" varValue=\"chosenNumbersNull\" list=\"combobox\" multiple=\"multiple\"/><span for=\"combo\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanFive beanTwo_ = new BeanFive();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("TWO");
        values_.add("THREE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        setupBeansAfter(conf_);
        assertEq("page1.html", nav_.getCurrentUrl());
        assertEq("bean_one", nav_.getCurrentBeanName());
        assertXmlEqualNoPrefix("<html xmlns:c='javahtml'><body>HEAD<a n-a=\"0\" c:command=\"$bean_one.goToNullPage\" href=\"\"/></body></html>", nav_.getHtmlText());
        bean_ = (BeanOne) conf_.getBeans().getVal("bean_one");
        StringMapObject map_ = bean_.getForms();
        assertEq(3, map_.size());
        StringList stLi_ = (StringList) map_.getVal("selectedStrings");
        assertEq(2, stLi_.size());
        assertEq("ONE", stLi_.first());
        assertEq("FOUR", stLi_.last());
        StringList l_ = (StringList) map_.getVal("chosenNumbersNull");
        assertEq(2, l_.size());
        assertEq("TWO", l_.first());
        assertEq("THREE", l_.last());
        assertTrue(map_.contains("chosenNumbers"));
        EnumNumbers enums_ = (EnumNumbers) map_.getVal("chosenNumbers");
        assertEq(2, enums_.size());
        assertEq(EnumNumber.ONE, enums_.first());
        assertEq(EnumNumber.FOUR, enums_.last());
        assertSame(conf_.getBeans().getVal("bean_one").getForms(), conf_.getBeans().getVal("bean_two").getForms());
        assertEq("",nav_.getTitle());
        assertEq("",nav_.getReferenceScroll());
        assertEq(0,nav_.getTooltips().size());
    }

    @Test
    public void processFormRequest1FailTest() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        BeanTwo beanTwoChanged_ = (BeanTwo) nav_.getSession().getBeans().getVal("bean_two");
        beanTwoChanged_.setChosenNumber(null);
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ABS");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        assertNotNull(nav_.getSession().getContext().getException());
    }

    @Test
    public void processFormRequest2FailTest() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ABS");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        assertNotNull(nav_.getSession().getContext().getException());
    }

    @Test
    public void processFormRequest3FailTest() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$validate\"><input type=\"text\" name=\"typedString\" varValue=\"typedString\"/><input type=\"submit\" value=\"OK\"/></form><form c:command=\"$validate\" name=\"myform2\"><input type=\"text\" name=\"field\" varValue=\"field\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        conf_.getNavigation().put("bean_two.go()", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go()").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go()").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        nav_.getHtmlPage().setUrl(-1);
        nav_.processFormRequest();
        assertNotNull(nav_.getSession().getContext().getException());
    }

    @Test
    public void processFormRequest4FailTest() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><c:select className=\"code.formathtml.classes.EnumNumber\" id=\"combo\" default=\"ONE\" name=\"chosenNumber\" varValue=\"chosenNumber\" list=\"getChosenNumbers()\" validator=\"validator\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.getValidators().put("validator", new MyValidatorEnum());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ABS");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        assertNotNull(nav_.getSession().getContext().getException());
    }

//    @Ignore
//    @Test(expected=SetterException.class)
//    public void processFormRequest5FailTest() {
//        String locale_ = "LOCALE";
//        String folder_ = "messages";
//        String relative_ = "sample/file";
//        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
//        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
//        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" varValue=\"typedString\"/></form></body></html>";
//        Map<String,String> files_ = new Map<String,String>();
//        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
//        files_.put("page1.html", html_);
//        files_.put("page2.html", htmlTwo_);
//        BeanOne bean_ = new BeanOne();
//        //bean_.setClassName(BeanOne.class.getName());
//        bean_.setScope("request");
//        BeanTwo beanTwo_ = new BeanTwo();
//        //beanTwo_.setClassName(BeanTwo.class.getName());
//        beanTwo_.setScope("request");
//        Configuration conf_ = newConfiguration();
//        conf_.setBeans(new Map<String,Bean>());
//        conf_.getBeans().put("bean_one", bean_);
//        conf_.getBeans().put("bean_two", beanTwo_);
//        conf_.setMessagesFolder(folder_);
//        conf_.setFirstUrl("page2.html");
//        conf_.setValidators(new Map<String,Validator>());
//        conf_.setProperties(new Map<String,String>());
//        conf_.getProperties().put("msg_example", relative_);
//        conf_.setTranslators(new Map<String,Translator>());
//        conf_.getTranslators().put("trans", new MyTranslator());
//        conf_.setNavigation(new Map<String,Map<String,String>>());
//        conf_.getNavigation().put("bean_two.go", new Map<String,String>());
//        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
//        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
//        Navigation nav_ = newNavigation();
//        nav_.setLanguage(locale_);
//        nav_.setSession(conf_);
//        nav_.setFiles(files_);
//        nav_.initializeSession();
//        nav_.getHtmlPage().setUrl(0);
//        nav_.processFormRequest("bean_one.getTrans(1)=ONE", "myform");
//    }

    @Test
    public void processFormRequest6FailTest() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" name=\"typedString\" c:varValue=\"typedString\" c:varMethod=\"inexistant\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setSepPrefix("c");
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("ONE");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        assertNotNull(nav_.getSession().getContext().getException());
    }

    @Ignore
    @Test
    public void processFormRequest7FailTest() {
        String locale_ = "LOCALE";
        String folder_ = "messages";
        String relative_ = "sample/file";
        String content_ = "one=Description one\ntwo=Description <a href=\"\">two</a>\nthree=desc &lt;{0}&gt;\nfour=''asp''";
        String html_ = "<html c:bean=\"bean_two\" xmlns:c='javahtml'><body>HEAD<a c:command=\"$goToNullPage\" href=\"\"/></body></html>";
        String htmlTwo_ = "<html c:bean=\"bean_one\" xmlns:c='javahtml'><body><form action=\"DELETE\" name=\"myform\" c:command=\"$go\"><input type=\"text\" c:className='$int' name=\"composite.privateInt\" varValue=\"composite.getPrivateInt()\"/></form></body></html>";
        StringMap<String> files_ = new StringMap<String>();
        files_.put(EquallableExUtil.formatFile(folder_,locale_,relative_), content_);
        files_.put("page1.html", html_);
        files_.put("page2.html", htmlTwo_);
        BeanOne bean_ = new BeanOne();
        //bean_.setClassName(BeanOne.class.getName());
        bean_.setScope("request");
        BeanTwo beanTwo_ = new BeanTwo();
        //beanTwo_.setClassName(BeanTwo.class.getName());
        beanTwo_.setScope("request");
        Configuration conf_ = newConfiguration();
        conf_.setBeans(new StringMap<Bean>());
        conf_.getBeans().put("bean_one", bean_);
        conf_.getBeans().put("bean_two", beanTwo_);
        conf_.setMessagesFolder(folder_);
        conf_.setFirstUrl("page2.html");
        conf_.setValidators(new StringMap<Validator>());
        conf_.setProperties(new StringMap<String>());
        conf_.getProperties().put("msg_example", relative_);
        conf_.setTranslators(new StringMap<Translator>());
        conf_.getTranslators().put("trans", new MyTranslator());
        conf_.setNavigation(new StringMap<StringMap<String>>());
        conf_.getNavigation().put("bean_two.go", new StringMap<String>());
        conf_.getNavigation().getVal("bean_two.go").put("change", "page1.html");
        conf_.getNavigation().getVal("bean_two.go").put("no_change", "page2.html");
        Navigation nav_ = newNavigation();
        nav_.setLanguage(locale_);
        nav_.setSession(conf_);
        nav_.setFiles(files_);
        nav_.initializeSession();
        HtmlPage htmlPage_ = nav_.getHtmlPage();
        NumberMap<Long,NatTreeMap<Long,NodeContainer>> containersMap_;
        containersMap_ = htmlPage_.getContainers();
        NatTreeMap<Long, NodeContainer> containers_ = containersMap_.getVal(0l);
        NodeContainer nc_;
        NodeInformations ni_;
        StringList values_;
        nc_ = containers_.getVal(0l);
        nc_.setEnabled(true);
        ni_ = nc_.getNodeInformation();
        values_ = new StringList();
        values_.add("5");
        ni_.setValue(values_);
        nav_.getHtmlPage().setUrl(0);
        nav_.processFormRequest();
        assertNotNull(nav_.getSession().getContext().getException());
    }

    private static void setupBeansAfter(Configuration _conf) {
        cleanBeans(_conf);
        for (EntryCust<String, Struct> e: _conf.getBuiltBeans().entryList()) {
            _conf.getBeans().put(e.getKey(), (Bean) e.getValue().getInstance());
        }
    }

    private static void cleanBeans(Configuration _conf) {
        _conf.getBeans().clear();
    }

    private static void assertXmlEqualNoPrefix(String _htmlExp, String _htmlRes) {
        assertTrue(DocumentBuilder.equalsDocs(_htmlExp, _htmlRes));
    }

    private static Navigation newNavigation() {
        Navigation nav_ = new Navigation();
        ContextEl context_ = new ContextEl();
        context_.getOptions().setSuffixVar(VariableSuffix.DISTINCT);
        context_.getOptions().setCatChars(true);
        context_.getOptions().setMultipleAffectations(false);
        nav_.getSession().setStandards(InitializationLgNames.initStandards(context_));
        nav_.getSession().setContext(context_);
        context_.initError();
        return nav_;
    }

    private static Configuration newConfiguration() {
        Configuration conf_ = new Configuration();
        ContextEl context_ = new ContextEl();
        context_.getOptions().setSuffixVar(VariableSuffix.DISTINCT);
        context_.getOptions().setCatChars(true);
        context_.getOptions().setMultipleAffectations(false);
        conf_.setStandards(InitializationLgNames.initStandards(context_));
        conf_.setContext(context_);
        context_.initError();
        return conf_;
    }
}
