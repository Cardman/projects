<html xmlns:c="javahtml" c:bean="simulation">
	<head>
		<title>
			<c:message value="msg_simulation,title_param">
				<param value="getRealStepNumber()"/>
			</c:message>
		</title>
		<link href="web/css/simulation.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
		<a c:command="$quit" href=""><c:message value="msg_simulation,index"/></a>
		<br/>
		<br/>
		<c:if condition="isDiffState()">
			<form action="" c:command="$validateDiffChoice" method="post">
				<c:message value="msg_simulation,win_pts"/>
				<c:select default="" map="winPointsFight" name="diffWinningExpPtsFight" update="" varValue="diffWinningExpPtsFight"/><br/>
				<c:message value="msg_simulation,allow_catching_ko"/>
				<input c:varValue="allowCatchingKo" name="allowCatchingKo" type="checkbox"/><br/>
				<c:message value="msg_simulation,allow_switch_places"/>
				<input c:varValue="allowedSwitchPlacesEndRound" name="allowedSwitchPlacesEndRound" type="checkbox"/><br/>
				<c:message value="msg_simulation,win_trainer_exp"/>
				<input c:validator="rate_validator" c:varValue="winTrainerExp" id="winTrainerExpRate" name="winTrainerExp" type="text"/><span c:for="winTrainerExpRate" class="errormessage" c:valueMessage="msg_simulation,rate_issue"> </span><br/>
				<c:message value="msg_simulation,winning_exp_pts_fight"/>
				<input c:validator="rate_validator" c:varValue="rateWinningExpPtsFight" id="winExpRateFight" name="rateWinningExpPtsFight" type="text"/><span c:for="winExpRateFight" class="errormessage" c:valueMessage="msg_simulation,rate_issue"> </span><br/>
				<c:message value="msg_simulation,end_fight"/>
				<input c:varValue="endFightIfOneTeamKo" name="endFightIfOneTeamKo" type="checkbox"/><br/>
				<c:message value="msg_simulation,iv_player"/>
				<input c:validator="short_validator" c:varValue="ivPlayer" id="ivPlayerId" name="ivPlayer" type="text"/><span c:for="ivPlayerId" class="errormessage" c:valueMessage="msg_simulation,short_issue"> </span><br/>
				<c:message value="msg_simulation,iv_foe"/>
				<input c:validator="short_validator" c:varValue="ivFoe" id="ivFoeId" name="ivFoe" type="text"/><span c:for="ivFoeId" class="errormessage" c:valueMessage="msg_simulation,short_issue"> </span><br/>
				<c:message value="msg_simulation,rate_win_money_base"/>
				<input c:validator="rate_validator" c:varValue="rateWinMoneyBase" id="rateWinMoneyBaseId" name="rateWinMoneyBase" type="text"/><span c:for="rateWinMoneyBaseId" class="errormessage" c:valueMessage="msg_simulation,rate_issue"> </span><br/>
				<c:message value="msg_simulation,rate_win_money_loose"/>
				<input c:validator="rate_validator" c:varValue="rateLooseMoneyWin" id="rateLooseMoneyWinId" name="rateLooseMoneyWin" type="text"/><span c:for="rateLooseMoneyWinId" class="errormessage" c:valueMessage="msg_simulation,rate_issue"> </span><br/>
				<c:message value="msg_simulation,restored_moves"/>
				<input c:varValue="restoredMovesEndFight" name="restoredMovesEndFight" type="checkbox"/><br/>
				<c:message value="msg_simulation,closing"/>
				<input c:varValue="enabledClosing" name="enabledClosing" type="checkbox"/><br/>
				<c:message value="msg_simulation,random_wild"/>
				<input c:varValue="randomWildFight" name="randomWildFight" type="checkbox"/><br/>
				<c:message value="msg_simulation,flee"/>
				<input c:varValue="stillPossibleFlee" name="stillPossibleFlee" type="checkbox"/><br/>
				<c:message value="msg_simulation,skip_learn"/>
				<input c:varValue="skipLearningMovesWhileNotGrowingLevel" name="skipLearningMovesWhileNotGrowingLevel" type="checkbox"/><br/>
				<c:message value="msg_simulation,law_choice_player"/>
				<c:select default="" map="damageRates" name="damageRatePlayer" update="" varValue="damageRatePlayer"/><br/>
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_simulation,rate_damage_ev"/></th>
							<th><c:message value="msg_simulation,rate_damage"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for key="e" map="damageRatePlayerTable" value="r" keyClassName='r' varClassName='r'>
							<tr>
								<td>{e}</td>
								<td>{r}</td>
							</tr>
						</c:for>
					</tbody>
				</table>
				<c:message value="msg_simulation,law_choice_foe"/>
				<c:select default="" map="damageRates" name="damageRateLawFoe" update="" varValue="damageRateLawFoe"/><br/>
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_simulation,rate_damage_ev"/></th>
							<th><c:message value="msg_simulation,rate_damage"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for key="e" map="damageRateFoeTable" value="r" keyClassName='r' varClassName='r'>
							<tr>
								<td>{e}</td>
								<td>{r}</td>
							</tr>
						</c:for>
					</tbody>
				</table>
				<c:message value="msg_simulation,free_teams"/>
				<input c:varValue="freeTeams" name="freeTeams" type="checkbox"/><br/>
				<c:submit message="msg_simulation,next_button"/><br/>
			</form>
		</c:if>
		<c:if condition="isFoeState()">
			<c:if condition="freeTeams">
				<form action="" c:command="$addPkTrainer" method="post" name="addingpk">
					<c:submit message="msg_simulation,add"/><br/>
				</form>
				<form action="" c:command="$selectFoePk" method="post" name="tablefoepk">
					<fieldset>
						<table>
							<caption><c:message value="msg_simulation,select_foe_pk"/></caption>
							<thead>
								<tr>
									<th><c:message value="msg_pokedex,image"/></th>
									<th><c:message value="msg_simulation,name_pk"/></th>
									<th><c:message value="msg_simulation,level_pk"/></th>
									<th><c:message value="msg_simulation,ability_pk"/></th>
									<th><c:message value="msg_simulation,gender_pk"/></th>
									<th><c:message value="msg_simulation,item_pk"/></th>
									<th><c:message value="msg_simulation,moves_pk"/></th>
									<th><c:message value="msg_simulation,selected"/></th>
								</tr>
							</thead>
							<tbody>
								<c:for className="aiki.beans.facade.simulation.dto.PokemonTrainerDto" list="foeTeam" var="p">
									<tr>
										<td><c:img src="{getImageFoe(([p]))}"/></td>
										<td>{getNameFoe(([p]))}</td>
										<td>{getLevelFoe(([p]))}</td>
										<td>{getAbilityFoe(([p]))}</td>
										<td>{getGenderFoe(([p]))}</td>
										<td>{getItemFoe(([p]))}</td>
										<td>
											<c:for list="getMovesFoe(([p]))" var="m" className='java.lang.String'>
												{m} - 
											</c:for>
										</td>
										<td>
											<input c:groupId="foePkTable" c:validator="selected_radio" c:varValue="p.index" name="selectedFoePk" type="radio"/>
										</td>
									</tr>
								</c:for>
							</tbody>
						</table>
						<span c:for="foePkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
						<input c:groupId="actionFoeRadios" c:validator="selected_radio" c:className="aiki.beans.facade.simulation.enums.TeamCrud" name="selectedFoeAction" type="radio" value="EDIT"/>
						<c:message value="msg_simulation,edit"/><br/>
						<input c:groupId="actionFoeRadios" c:validator="selected_radio" c:className="aiki.beans.facade.simulation.enums.TeamCrud" name="selectedFoeAction" type="radio" value="REMOVE"/>
						<c:message value="msg_simulation,remove"/><br/>
						<c:submit message="msg_simulation,select"/>
						<span c:for="actionFoeRadios" class="errormessage" c:valueMessage="msg_simulation,unselected_action"> </span><br/>
					</fieldset>
				</form>
				<form action="" c:command="$selectAllyPk" method="post" name="tableallypk">
					<fieldset>
						<table>
							<caption><c:message value="msg_simulation,select_ally_pk"/></caption>
							<thead>
								<tr>
									<th><c:message value="msg_pokedex,image"/></th>
									<th><c:message value="msg_simulation,name_pk"/></th>
									<th><c:message value="msg_simulation,level_pk"/></th>
									<th><c:message value="msg_simulation,ability_pk"/></th>
									<th><c:message value="msg_simulation,gender_pk"/></th>
									<th><c:message value="msg_simulation,item_pk"/></th>
									<th><c:message value="msg_simulation,moves_pk"/></th>
									<th><c:message value="msg_simulation,selected"/></th>
								</tr>
							</thead>
							<tbody>
								<c:for className="aiki.beans.facade.simulation.dto.PokemonTrainerDto" list="allyTeam" var="p">
									<tr>
										<td><c:img src="{getImageAlly(([p]))}"/></td>
										<td>{getNameAlly(([p]))}</td>
										<td>{getLevelAlly(([p]))}</td>
										<td>{getAbilityAlly(([p]))}</td>
										<td>{getGenderAlly(([p]))}</td>
										<td>{getItemAlly(([p]))}</td>
										<td>
											<c:for list="getMovesAlly(([p]))" var="m" className='java.lang.String'>
												{m} - 
											</c:for>
										</td>
										<td>
											<input c:groupId="allyPkTable" c:validator="selected_radio" c:varValue="p.index" name="selectedAllyPk" type="radio"/>
										</td>
									</tr>
								</c:for>
							</tbody>
						</table>
						<span c:for="allyPkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
						<input c:groupId="actionAllyRadios" c:validator="selected_radio" c:className="aiki.beans.facade.simulation.enums.TeamCrud" name="selectedAllyAction" type="radio" value="EDIT"/>
						<c:message value="msg_simulation,edit"/><br/>
						<input c:groupId="actionAllyRadios" c:validator="selected_radio" c:className="aiki.beans.facade.simulation.enums.TeamCrud" name="selectedAllyAction" type="radio" value="REMOVE"/>
						<c:message value="msg_simulation,remove"/><br/>
						<c:submit message="msg_simulation,select"/>
						<span c:for="actionAllyRadios" class="errormessage" c:valueMessage="msg_simulation,unselected_action"> </span><br/>
					</fieldset>
				</form>
			</c:if>
			<c:if condition="!freeTeams">
				<ul>
					<c:for className="aiki.beans.facade.map.dto.PlaceIndex" list="places" var="p">
						<li>
							{p.getPlace().getName()}<br/>
							<c:if condition="isMultiLayer(([p]))">
								<ul>
									<c:for list="layers(([p]))" var="l">
										<li>
											<a c:command="$clickLevel({p.index},{([l])})">{([l])}</a>
										</li>
									</c:for>
								</ul>
							</c:if>
							<c:if condition="!isMultiLayer(([p]))">
								<a c:command="$clickLevel({p.index},0)"><c:message value="msg_levelmap,goLevel"/></a>
							</c:if>
						</li>
					</c:for>
				</ul>
				<c:message value="msg_simulation,no_fight"/>{getTrainerName()}<br/>
			</c:if>
			<form action="" c:command="$cancelDiffChoice" method="post" name="cancel">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<c:if condition="freeTeams">
				<form action="" c:command="$validateFoeChoiceFree" method="post" name="ok">
					<c:message value="msg_simulation,multiplicity_fight"/>
					<input c:varValue="multiplicity" name="multiplicity" type="text"/><br/>
					<c:message value="msg_simulation,env_fight"/>
					<c:select default="" map="environments" name="environment" update="" varValue="environment"/><br/>
					<c:submit message="msg_simulation,next_button"/>
				</form>
				<c:if condition="!ok">
					<span class="errormessage">
						<c:message value="msg_simulation,empty_foe_team"/>
					</span>
				</c:if>
			</c:if>
			<c:if condition="!freeTeams">
				<form action="" c:command="$validateFoeChoice" method="post" name="ok">
					<c:submit message="msg_simulation,next_button"/>
				</form>
				<c:if condition="!ok">
					<span class="errormessage">
						<c:message value="msg_simulation,not_selected_foe"/>
					</span>
				</c:if>
			</c:if>
		</c:if>
		<c:if condition="isTeamState()">
			<c:message value="msg_simulation,select_pk"/><br/>
			<form action="" c:command="$add" method="post" name="addingpk">
				<c:submit message="msg_simulation,add"/><br/>
			</form>
			<form action="" c:command="$selectPk" method="post" name="tablepk">
				<fieldset>
					<table>
						<thead>
							<tr>
								<th><c:message value="msg_pokedex,image"/></th>
								<th><c:message value="msg_simulation,name_pk"/></th>
								<th><c:message value="msg_simulation,level_pk"/></th>
								<th><c:message value="msg_simulation,ability_pk"/></th>
								<th><c:message value="msg_simulation,gender_pk"/></th>
								<th><c:message value="msg_simulation,item_pk"/></th>
								<th><c:message value="msg_simulation,moves_pk"/></th>
								<th><c:message value="msg_simulation,selected"/></th>
							</tr>
						</thead>
						<tbody>
							<c:for className="aiki.beans.facade.simulation.dto.PokemonPlayerDto" list="team" var="p">
								<tr>
									<td><c:img src="{getImage(([p]))}"/></td>
									<td>{getName(([p]))}</td>
									<td>{getLevel(([p]))}</td>
									<td>{getAbility(([p]))}</td>
									<td>{getGender(([p]))}</td>
									<td>{getItem(([p]))}</td>
									<td>
										<c:for list="getMoves(([p]))" var="m" className='java.lang.String'>
											{m} - 
										</c:for>
									</td>
									<td>
										<input c:groupId="pkTable" c:validator="selected_radio" c:varValue="p.index" name="selectedPk" type="radio"/>
									</td>
								</tr>
							</c:for>
						</tbody>
					</table>
					<span c:for="pkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
					<input c:groupId="actionRadios" c:validator="selected_radio" c:className="aiki.beans.facade.simulation.enums.TeamCrud" name="selectedAction" type="radio" value="EDIT"/>
					<c:message value="msg_simulation,edit"/><br/>
					<input c:groupId="actionRadios" c:validator="selected_radio" c:className="aiki.beans.facade.simulation.enums.TeamCrud" name="selectedAction" type="radio" value="REMOVE"/>
					<c:message value="msg_simulation,remove"/><br/>
					<c:submit message="msg_simulation,select"/>
					<span c:for="actionRadios" class="errormessage" c:valueMessage="msg_simulation,unselected_action"> </span><br/>
				</fieldset>
			</form>
			<br/>
			<form action="" c:command="$cancelTeam" method="post" name="cancel">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<form action="" c:command="$validateTeam" method="post" name="next">
				<c:submit message="msg_simulation,next_button"/>
			</form>
			<form action="" c:command="$validateFoeChoiceSkipEvolutions" method="post" name="skipevos">
				<c:submit message="msg_simulation,disable_evos"/>
			</form>
			<c:if condition="!ok">
				<span class="errormessage">
					<c:message value="msg_simulation,not_selected_player_pk"/>
				</span>
			</c:if>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for list="foeTeam" var="p">
						<tr>
							<td><c:img src="{getImageFoe(([p]))}"/></td>
							<td>{getNameFoe(([p]))}</td>
							<td>{getLevelFoe(([p]))}</td>
							<td>{getAbilityFoe(([p]))}</td>
							<td>{getGenderFoe(([p]))}</td>
							<td>{getItemFoe(([p]))}</td>
							<td>
								<c:for list="getMovesFoe(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
			<br/>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for className="aiki.beans.facade.simulation.dto.PokemonTrainerDto" list="allyTeam" var="p">
						<tr>
							<td><c:img src="{getImageAlly(([p]))}"/></td>
							<td>{getNameAlly(([p]))}</td>
							<td>{getLevelAlly(([p]))}</td>
							<td>{getAbilityAlly(([p]))}</td>
							<td>{getGenderAlly(([p]))}</td>
							<td>{getItemAlly(([p]))}</td>
							<td>
								<c:for list="getMovesAlly(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
		</c:if>
		<c:if condition="isEvolutionsState()">
			<c:message value="msg_simulation,select_pk_evos"/><br/>
			<form action="" c:command="$displayEvolutions" method="post" name="tablepk">
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_pokedex,image"/></th>
							<th><c:message value="msg_simulation,name_pk"/></th>
							<th><c:message value="msg_simulation,level_pk"/></th>
							<th><c:message value="msg_simulation,ability_pk"/></th>
							<th><c:message value="msg_simulation,gender_pk"/></th>
							<th><c:message value="msg_simulation,item_pk"/></th>
							<th><c:message value="msg_simulation,moves_pk"/></th>
							<th><c:message value="msg_simulation,selected"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for className="aiki.beans.facade.simulation.dto.PokemonPlayerDto" list="team" var="p">
							<tr>
								<td><c:img src="{getImage(([p]))}"/></td>
								<td>{getName(([p]))}</td>
								<td>{getLevel(([p]))}</td>
								<td>{getAbility(([p]))}</td>
								<td>{getGender(([p]))}</td>
								<td>{getItem(([p]))}</td>
								<td>
									<c:for list="getMoves(([p]))" var="m" className='java.lang.String'>
										{m} - 
									</c:for>
								</td>
								<td>
									<input c:groupId="pkTable" c:validator="selected_radio" c:varValue="p.index" name="selectedPk" type="radio"/>
								</td>
							</tr>
						</c:for>
					</tbody>
				</table>
				<span c:for="pkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
				<c:submit message="msg_simulation,select"/>
			</form>
			<c:if condition="selectedIndex()">
				<c:if condition="!availableEvos.isEmpty()">
					<form action="" c:command="$validateEvo" method="post" name="chooseevo">
						<c:select default="" map="availableEvos" name="chosenEvo" update="" varValue="chosenEvo"/><br/>
						<c:message value="msg_simulation,level_pk"/>
						<input c:varValue="levelEvo" name="levelEvo" type="text"/><br/>
						<c:submit message="msg_simulation,select"/>
					</form>
				</c:if>
				<form action="" c:command="$cancelEvo" method="post" name="cancel">
					<c:submit message="msg_simulation,cancel_evo"/><br/>
				</form>
			</c:if>
			<br/>
			<form action="" c:command="$cancelEvolutions" method="post" name="cancelevo">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<form action="" c:command="$validateEvolutions" method="post" name="validateevo">
				<c:submit message="msg_simulation,next_button"/>
			</form>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for list="foeTeam" var="p">
						<tr>
							<td><c:img src="{getImageFoe(([p]))}"/></td>
							<td>{getNameFoe(([p]))}</td>
							<td>{getLevelFoe(([p]))}</td>
							<td>{getAbilityFoe(([p]))}</td>
							<td>{getGenderFoe(([p]))}</td>
							<td>{getItemFoe(([p]))}</td>
							<td>
								<c:for list="getMovesFoe(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
			<br/>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for className="aiki.beans.facade.simulation.dto.PokemonTrainerDto" list="allyTeam" var="p">
						<tr>
							<td><c:img src="{getImageAlly(([p]))}"/></td>
							<td>{getNameAlly(([p]))}</td>
							<td>{getLevelAlly(([p]))}</td>
							<td>{getAbilityAlly(([p]))}</td>
							<td>{getGenderAlly(([p]))}</td>
							<td>{getItemAlly(([p]))}</td>
							<td>
								<c:for list="getMovesAlly(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
		</c:if>
		<c:if condition="isFrontState()">
			<c:message value="msg_simulation,select_sent_pk"/><br/>
			<form action="" c:command="$validateFrontFighter" method="post" name="tablepk">
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_pokedex,image"/></th>
							<th><c:message value="msg_simulation,name_pk"/></th>
							<th><c:message value="msg_simulation,level_pk"/></th>
							<th><c:message value="msg_simulation,ability_pk"/></th>
							<th><c:message value="msg_simulation,gender_pk"/></th>
							<th><c:message value="msg_simulation,item_pk"/></th>
							<th><c:message value="msg_simulation,moves_pk"/></th>
							<th><c:message value="msg_simulation,selected"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for className="aiki.beans.facade.simulation.dto.PokemonPlayerDto" list="team" var="p">
							<tr>
								<td><c:img src="{getImage(([p]))}"/></td>
								<td>{getName(([p]))}</td>
								<td>{getLevel(([p]))}</td>
								<td>{getAbility(([p]))}</td>
								<td>{getGender(([p]))}</td>
								<td>{getItem(([p]))}</td>
								<td>
									<c:for list="getMoves(([p]))" var="m" className='java.lang.String'>
										{m} - 
									</c:for>
								</td>
								<td>
									<input c:groupId="pkTable" c:validator="selected_radio" c:varValue="p.index" name="selectedPk" type="radio"/>
								</td>
							</tr>
						</c:for>
					</tbody>
				</table>
				<span c:for="pkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
				<c:message value="msg_simulation,round"/>
				<c:select default="" map="round" name="selectedRound" update="" varValue="selectedRound"/><br/>
				<c:message value="msg_simulation,multiplicity"/>
				<c:select default="" map="placesFight" name="placeFight" update="" varValue="placeFight"/><br/>
				<c:submit message="msg_simulation,select"/>
			</form>
			<br/>
			<form action="" c:command="$cancelFrontFighters" method="post" name="cancelfighter">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<form action="" c:command="$validateFrontFighters" method="post" name="validatefighter">
				<c:submit message="msg_simulation,next_button"/>
			</form>
			<c:if condition="!ok">
				<c:if condition="displayIfError">
					<span class="errormessage">
						<c:message value="msg_simulation,bad_choice_front_fighter"/>
					</span>
				</c:if>
			</c:if>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for list="foeTeam" var="p">
						<tr>
							<td><c:img src="{getImageFoe(([p]))}"/></td>
							<td>{getNameFoe(([p]))}</td>
							<td>{getLevelFoe(([p]))}</td>
							<td>{getAbilityFoe(([p]))}</td>
							<td>{getGenderFoe(([p]))}</td>
							<td>{getItemFoe(([p]))}</td>
							<td>
								<c:for list="getMovesFoe(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
			<br/>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for className="aiki.beans.facade.simulation.dto.PokemonTrainerDto" list="allyTeam" var="p">
						<tr>
							<td><c:img src="{getImageAlly(([p]))}"/></td>
							<td>{getNameAlly(([p]))}</td>
							<td>{getLevelAlly(([p]))}</td>
							<td>{getAbilityAlly(([p]))}</td>
							<td>{getGenderAlly(([p]))}</td>
							<td>{getItemAlly(([p]))}</td>
							<td>
								<c:for list="getMovesAlly(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
		</c:if>
		<c:if condition="isMovesState()">
			<c:message value="msg_simulation,select_pk_moves"/><br/>
			<form action="" c:command="web/html/simulation/simulation.html" method="post" name="tablepk">
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_pokedex,image"/></th>
							<th><c:message value="msg_simulation,name_pk"/></th>
							<th><c:message value="msg_simulation,level_pk"/></th>
							<th><c:message value="msg_simulation,ability_pk"/></th>
							<th><c:message value="msg_simulation,gender_pk"/></th>
							<th><c:message value="msg_simulation,item_pk"/></th>
							<th><c:message value="msg_simulation,moves_pk"/></th>
							<th><c:message value="msg_simulation,selected"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for className="aiki.beans.facade.simulation.dto.PokemonPlayerDto" list="team" var="p">
							<tr>
								<td><c:img src="{getImage(([p]))}"/></td>
								<td>{getName(([p]))}</td>
								<td>{getLevel(([p]))}</td>
								<td>{getAbility(([p]))}</td>
								<td>{getGender(([p]))}</td>
								<td>{getItem(([p]))}</td>
								<td>
									<c:for list="getMoves(([p]))" var="m" className='java.lang.String'>
										{m} - 
									</c:for>
								</td>
								<td>
									<input c:groupId="pkTable" c:validator="selected_radio" c:varValue="p.index" name="selectedPk" type="radio"/>
								</td>
							</tr>
						</c:for>
					</tbody>
				</table>
				<span c:for="pkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
				<c:submit message="msg_simulation,select"/>
			</form>
			<c:if condition="selectedIndexForMoves()">
				<c:if condition="isAvailableMoves()">
					<form action="" c:command="$validateMoves" method="post" name="moves">
						<c:if condition="isAvailableAbilities()">
							<c:message value="msg_simulation,ability_pk"/>
							<c:select default="" map="abilities" name="currentAbility" update="" varValue="currentAbility"/><br/>
						</c:if>
						<table>
							<caption><c:message value="msg_moves,moves"/></caption>
							<thead>
								<tr>
									<th><c:message value="msg_moves,name_h"/></th>
									<th><c:message value="msg_moves,pp_h"/></th>
									<th><c:message value="msg_moves,types_h"/></th>
									<th><c:message value="msg_moves,cat_h"/></th>
									<th><c:message value="msg_moves,damag_h"/></th>
									<th><c:message value="msg_moves,direc_h"/></th>
									<th><c:message value="msg_moves,prio_h"/></th>
									<th><c:message value="msg_simulation,selected"/></th>
								</tr>
							</thead>
							<tbody>
								<c:for className="aiki.beans.facade.simulation.dto.SelectLineMove" list="keptMoves" var="d">
									<tr>
										<td>{d.displayName}</td>
										<td>{d.pp}</td>
										<td>
											<c:for list="d.getTypes()" var="t" className='java.lang.String'>
												{t} -
											</c:for>
										</td>
										<td>{d.category}</td>
										<td>
											<c:if condition="d.isDamageMove()">
												<c:message value="msg_moves,damaging"/>
											</c:if>
											<c:if condition="!d.isDamageMove()">
												<c:message value="msg_moves,status"/>
											</c:if>
										</td>
										<td>
											<c:if condition="!d.isDamageMove()">
												<c:message value="msg_moves,status_indirect"/>
											</c:if>
											<c:if condition="d.isDamageMove()">
												<c:if condition="d.isDirect()">
													<c:message value="msg_moves,damaging_direct"/>
												</c:if>
												<c:if condition="!d.isDirect()">
													<c:message value="msg_moves,damaging_indirect"/>
												</c:if>
											</c:if>
										</td>
										<td>{d.priority}</td>
										<td>
											<input c:varValue="d.selected" name="d.selected" type="checkbox"/>
										</td>
									</tr>
								</c:for>
							</tbody>
						</table>
						<c:submit message="msg_simulation,validate_moves"/><br/>
					</form>
				</c:if>
				<form action="" c:command="$cancelMoves" method="post" name="cancelmoves">
					<c:submit message="msg_simulation,cancel_moves"/>
				</form>
			</c:if>
			<form action="" c:command="$cancelMovesSets" method="post" name="cancelmovesset">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<form action="" c:command="$validateMovesSets" method="post" name="validatemovesset">
				<c:submit message="msg_simulation,next_button"/>
			</form>
			<c:if condition="!ok">
				<c:if condition="displayIfError">
					<span class="errormessage">
						<c:message value="msg_simulation,bad_choice_front_fighter_moves"/>
					</span>
				</c:if>
			</c:if>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for list="foeTeam" var="p">
						<tr>
							<td><c:img src="{getImageFoe(([p]))}"/></td>
							<td>{getNameFoe(([p]))}</td>
							<td>{getLevelFoe(([p]))}</td>
							<td>{getAbilityFoe(([p]))}</td>
							<td>{getGenderFoe(([p]))}</td>
							<td>{getItemFoe(([p]))}</td>
							<td>
								<c:for list="getMovesFoe(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
			<br/>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for className="aiki.beans.facade.simulation.dto.PokemonTrainerDto" list="allyTeam" var="p">
						<tr>
							<td><c:img src="{getImageAlly(([p]))}"/></td>
							<td>{getNameAlly(([p]))}</td>
							<td>{getLevelAlly(([p]))}</td>
							<td>{getAbilityAlly(([p]))}</td>
							<td>{getGenderAlly(([p]))}</td>
							<td>{getItemAlly(([p]))}</td>
							<td>
								<c:for list="getMovesAlly(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
		</c:if>
		<c:if condition="isMovesFightState()">
			<c:message value="msg_simulation,select_pk_move_target"/><br/>
			<form action="" c:command="web/html/simulation/simulation.html" method="post" name="tablepk">
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_pokedex,image"/></th>
							<th><c:message value="msg_simulation,name_pk"/></th>
							<th><c:message value="msg_simulation,level_pk"/></th>
							<th><c:message value="msg_simulation,ability_pk"/></th>
							<th><c:message value="msg_simulation,gender_pk"/></th>
							<th><c:message value="msg_simulation,item_pk"/></th>
							<th><c:message value="msg_simulation,moves_pk"/></th>
							<th><c:message value="msg_simulation,selected"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for className="aiki.beans.facade.simulation.dto.PokemonPlayerDto" list="team" var="p">
							<tr>
								<td><c:img src="{getImage(([p]))}"/></td>
								<td>{getName(([p]))}</td>
								<td>{getLevel(([p]))}</td>
								<td>{getAbility(([p]))}</td>
								<td>{getGender(([p]))}</td>
								<td>{getItem(([p]))}</td>
								<td>
									<c:for list="getMoves(([p]))" var="m" className='java.lang.String'>
										{m} - 
									</c:for>
								</td>
								<td>
									<input c:groupId="pkTable" c:validator="selected_radio" c:varValue="p.index" name="selectedPk" type="radio"/>
								</td>
							</tr>
						</c:for>
					</tbody>
				</table>
				<span c:for="pkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
				<c:message value="msg_simulation,round"/>
				<c:select default="" map="round" name="selectedRound" update="" varValue="selectedRound"/><br/>
				<c:submit message="msg_simulation,select"/>
			</form>
			<c:if condition="selectedIndexForMoves()">
				<form action="" c:command="$validateMovesChoice" method="post" name="moves">
					<table>
						<caption><c:message value="msg_moves,moves"/></caption>
						<thead>
							<tr>
								<th><c:message value="msg_moves,name_h"/></th>
								<th><c:message value="msg_moves,pp_h"/></th>
								<th><c:message value="msg_moves,types_h"/></th>
								<th><c:message value="msg_moves,cat_h"/></th>
								<th><c:message value="msg_moves,damag_h"/></th>
								<th><c:message value="msg_moves,direc_h"/></th>
								<th><c:message value="msg_moves,prio_h"/></th>
								<th><c:message value="msg_simulation,selected"/></th>
							</tr>
						</thead>
						<tbody>
							<c:for className="aiki.beans.facade.simulation.dto.RadioLineMove" list="movesSet" var="d">
								<tr>
									<td>{d.displayName}</td>
									<td>{d.pp}</td>
									<td>
										<c:for list="d.getTypes()" var="t" className='java.lang.String'>
											{t} -
										</c:for>
									</td>
									<td>{d.category}</td>
									<td>
										<c:if condition="d.isDamageMove()">
											<c:message value="msg_moves,damaging"/>
										</c:if>
										<c:if condition="!d.isDamageMove()">
											<c:message value="msg_moves,status"/>
										</c:if>
									</td>
									<td>
										<c:if condition="!d.isDamageMove()">
											<c:message value="msg_moves,status_indirect"/>
										</c:if>
										<c:if condition="d.isDamageMove()">
											<c:if condition="d.isDirect()">
												<c:message value="msg_moves,damaging_direct"/>
											</c:if>
											<c:if condition="!d.isDirect()">
												<c:message value="msg_moves,damaging_indirect"/>
											</c:if>
										</c:if>
									</td>
									<td>{d.priority}</td>
									<td>
										<input c:groupId="moveTable" c:validator="selected_radio" c:varValue="d.index" name="selectedMove" type="radio"/>
									</td>
								</tr>
							</c:for>
						</tbody>
					</table>
					<span c:for="moveTable" class="errormessage" c:valueMessage="msg_simulation,unselected_move"> </span><br/>
					<c:message value="msg_simulation,ally_choice"/>
					<input c:varValue="allyChoice" name="allyChoice" type="checkbox"/><br/>
					<c:message value="msg_simulation,multiplicity"/>
					<c:select default="" map="targetFight" name="target" update="" varValue="target"/>
					<c:submit message="msg_simulation,validate_move_target"/><br/>
				</form>
			</c:if>
			<br/>
			<form action="" c:command="$cancelMovesEvos" method="post" name="cancelmovesset">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<form action="" c:command="$simulateFight" method="post" name="validatemovesset">
				<c:submit message="msg_simulation,next_button"/>
			</form>
			<c:if condition="!ok">
				<span class="errormessage">
					<c:message value="msg_simulation,bad_choice_front_fighter_moves_targets"/>
				</span>
			</c:if>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for list="foeTeam" var="p">
						<tr>
							<td><c:img src="{getImageFoe(([p]))}"/></td>
							<td>{getNameFoe(([p]))}</td>
							<td>{getLevelFoe(([p]))}</td>
							<td>{getAbilityFoe(([p]))}</td>
							<td>{getGenderFoe(([p]))}</td>
							<td>{getItemFoe(([p]))}</td>
							<td>
								<c:for list="getMovesFoe(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
			<br/>
			<table>
				<thead>
					<tr>
						<th><c:message value="msg_pokedex,image"/></th>
						<th><c:message value="msg_simulation,name_pk"/></th>
						<th><c:message value="msg_simulation,level_pk"/></th>
						<th><c:message value="msg_simulation,ability_pk"/></th>
						<th><c:message value="msg_simulation,gender_pk"/></th>
						<th><c:message value="msg_simulation,item_pk"/></th>
						<th><c:message value="msg_simulation,moves_pk"/></th>
					</tr>
				</thead>
				<tbody>
					<c:for list="allyTeam" var="p">
						<tr>
							<td><c:img src="{getImageAlly(([p]))}"/></td>
							<td>{getNameAlly(([p]))}</td>
							<td>{getLevelAlly(([p]))}</td>
							<td>{getAbilityAlly(([p]))}</td>
							<td>{getGenderAlly(([p]))}</td>
							<td>{getItemAlly(([p]))}</td>
							<td>
								<c:for list="getMovesAlly(([p]))" var="m" className='java.lang.String'>
									{m} - 
								</c:for>
							</td>
						</tr>
					</c:for>
				</tbody>
			</table>
		</c:if>
		<c:if condition="isSimulationState()">
			<br/>
			<c:if condition="isIssue()">
				<c:if condition="!getKoPlayers().isEmpty()">
					<c:message value="msg_simulation,ko_player_fighters"/>
					<ul>
						<c:for list="getKoPlayers()" var="p" className='java.lang.String'>
							<li>{p}</li>
						</c:for>
					</ul>
				</c:if>
				<br/>
				<c:if condition="!getNotKoFrontFoes().isEmpty()">
					<c:message value="msg_simulation,not_ko_foe_fighters"/>
					<ul>
						<c:for list="getNotKoFrontFoes()" var="p" className='java.lang.String'>
							<li>{p}</li>
						</c:for>
					</ul>
				</c:if>
				<br/>
				<c:if condition="!getKoFoes().isEmpty()">
					<c:message value="msg_simulation,ko_foe_fighters"/>
					<ul>
						<c:for list="getKoFoes()" var="p" className='java.lang.String'>
							<li>{p}</li>
						</c:for>
					</ul>
				</c:if>
				<br/>
				<c:if condition="isRulesIssue()">
					<c:message value="msg_simulation,issue_rules"/>
					<c:if condition="isRulesMovesIssue()">
						<c:message value="msg_simulation,issue_rules_moves"/>
						<br/>
					</c:if>
					<c:if condition="isRulesLearnIssue()">
						<c:message value="msg_simulation,issue_rules_learn"/>
						<br/>
					</c:if>
					<c:if condition="isRulesSwitchIssue()">
						<c:message value="msg_simulation,issue_rules_switch"/>
						<br/>
					</c:if>
				</c:if>
				<c:if condition="isSendingIssue()">
					<c:message value="msg_simulation,issue_sending"/>
					<br/>
				</c:if>
				<c:if condition="isRandomIssue()">
					<c:message value="msg_simulation,issue_random"/>
					<br/>
				</c:if>
				<c:if condition="isUsingIssue()">
					<c:message value="msg_simulation,issue_using"/>
					<br/>
				</c:if>
				<c:if condition="isHardSimulationIssue()">
					<c:message value="msg_simulation,issue_too_hard"/>
					<br/>
				</c:if>
				<c:if condition="isIssueAfterFight()">
					<c:message value="msg_simulation,issue_after_fight"/>
					<br/>
				</c:if>
				<c:for list="comments" var="l" className='java.lang.String'>
					{l}<br/>
				</c:for>
			</c:if>
			<hr/>
			
			<br/>
			<c:if condition="!teamAfterFight.isEmpty()">
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_pokedex,image"/></th>
							<th><c:message value="msg_simulation,name_pk"/></th>
							<th><c:message value="msg_simulation,level_pk"/></th>
							<th><c:message value="msg_simulation,ability_pk"/></th>
							<th><c:message value="msg_simulation,gender_pk"/></th>
							<th><c:message value="msg_simulation,item_pk"/></th>
							<th><c:message value="msg_simulation,moves_pk"/></th>
							<th><c:message value="msg_simulation,hp_rate"/></th>
							<th><c:message value="msg_simulation,exp_pk"/></th>
							<th><c:message value="msg_simulation,exp_pk_rem"/></th>
							<th><c:message value="msg_simulation,happiness_pk"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for className="aiki.map.pokemon.PokemonPlayer" list="teamAfterFight" var="p">
							<tr>
								<td><c:img src="{getImageAfterFight(([p]))}"/></td>
								<td>{getNameAfterFight(([p]))}</td>
								<td>{getLevelAfterFight(([p]))}</td>
								<td>{getAbilityAfterFight(([p]))}</td>
								<td>{getGenderAfterFight(([p]))}</td>
								<td>{getItemAfterFight(([p]))}</td>
								<td>
									<c:for list="getMovesAfterFight(([p]))" var="m" className='java.lang.String'>
										{m} - 
									</c:for>
								</td>
								<td>{getRemainingLifeRate(([p]))} %</td>
								<td>{p.getWonExpSinceLastLevel()}</td>
								<td>{numberNecessaryPointsForGrowingLevel(([p]))}</td>
								<td>{p.getHappiness()}</td>
							</tr>
						</c:for>
					</tbody>
				</table>
			</c:if>
			<hr/>
			<form action="" c:command="$changeFight" method="post" name="cancelsimu">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<c:if condition="isFightAfter()">
				<form action="" c:command="$nextFight" method="post" name="validatesimu">
					<c:submit message="msg_simulation,next_button"/>
				</form>
			</c:if>
			<br/>
			<hr/>
			<br/>
			<c:if condition="!isIssue()">
				<form action="" c:command="$displayComments" method="post" name="displaycomment">
					<c:submit message="msg_simulation,display_comments"/>
				</form>
				<form action="" c:command="$hideComments" method="post" name="hidecomment">
					<c:submit message="msg_simulation,hide_comments"/>
				</form>
				<c:for list="comments" var="l" className='java.lang.String'>
					{l}<br/>
				</c:for>
			</c:if>
		</c:if>
		<c:if condition="isEvolutionAfterFightState()">
			<c:message value="msg_simulation,select_pk_evos_after_fight"/><br/>
			<form action="" c:command="$selectPkAfterFight" method="post" name="selectPk">
				<table>
					<thead>
						<tr>
							<th><c:message value="msg_pokedex,image"/></th>
							<th><c:message value="msg_simulation,name_pk"/></th>
							<th><c:message value="msg_simulation,level_pk"/></th>
							<th><c:message value="msg_simulation,ability_pk"/></th>
							<th><c:message value="msg_simulation,gender_pk"/></th>
							<th><c:message value="msg_simulation,item_pk"/></th>
							<th><c:message value="msg_simulation,moves_pk"/></th>
							<th><c:message value="msg_simulation,hp_rate"/></th>
							<th><c:message value="msg_simulation,exp_pk"/></th>
							<th><c:message value="msg_simulation,exp_pk_rem"/></th>
							<th><c:message value="msg_simulation,happiness_pk"/></th>
							<th><c:message value="msg_simulation,selected"/></th>
						</tr>
					</thead>
					<tbody>
						<c:for className="aiki.map.pokemon.PokemonPlayer" list="teamAfterFight" var="p">
							<tr>
								<td><c:img src="{getImageAfterFight(([p]))}"/></td>
								<td>{getNameAfterFight(([p]))}</td>
								<td>{getLevelAfterFight(([p]))}</td>
								<td>{getAbilityAfterFight(([p]))}</td>
								<td>{getGenderAfterFight(([p]))}</td>
								<td>{getItemAfterFight(([p]))}</td>
								<td>
									<c:for list="getMovesAfterFight(([p]))" var="m" className='java.lang.String'>
										{m} - 
									</c:for>
								</td>
								<td>{getRemainingLifeRate(([p]))} %</td>
								<td>{p.getWonExpSinceLastLevel()}</td>
								<td>{numberNecessaryPointsForGrowingLevel(([p]))}</td>
								<td>{p.getHappiness()}</td>
								<td>
									<input c:groupId="pkTable" c:validator="selected_radio" c:varValue="([p])" name="selectedPk" type="radio"/>
								</td>
							</tr>
						</c:for>
					</tbody>
				</table>
				<span c:for="pkTable" class="errormessage" c:valueMessage="msg_simulation,unselected_pk"> </span><br/>
				<c:submit message="msg_simulation,select"/>
			</form>
			<c:if condition="selectedIndexForMoves()">
				<form action="" c:command="$validateEvolutionAfterFight" method="post" name="changeEvo">
					<c:message value="msg_simulation,evolution"/>
					<c:select default="" map="evolutionsAfterFight" name="evolutionAfterFight" update="" varValue="evolutionAfterFight"/>
					<c:submit message="msg_simulation,select"/>
				</form>
				<form action="" c:command="$cancelEvolutionsAfterFight" method="post" name="cancelEvos">
					<c:submit message="msg_simulation,cancel_moves"/>
				</form>
				<form action="" c:command="$validateMovesAbilityAfterFight" method="post" name="changeMoves">
					<c:message value="msg_simulation,ability_pk"/>
					<c:select default="" map="abilitiesAfterFight" name="abilityAfterFight" update="" varValue="abilityAfterFight"/>
					<table>
						<caption><c:message value="msg_moves,moves"/></caption>
						<thead>
							<tr>
								<th><c:message value="msg_moves,name_h"/></th>
								<th><c:message value="msg_moves,pp_h"/></th>
								<th><c:message value="msg_moves,types_h"/></th>
								<th><c:message value="msg_moves,cat_h"/></th>
								<th><c:message value="msg_moves,damag_h"/></th>
								<th><c:message value="msg_moves,direc_h"/></th>
								<th><c:message value="msg_moves,prio_h"/></th>
								<th><c:message value="msg_simulation,selected"/></th>
							</tr>
						</thead>
						<tbody>
							<c:for className="aiki.beans.facade.simulation.dto.SelectLineMove" list="keptMovesAfterFight" var="d">
								<tr>
									<td>{d.displayName}</td>
									<td>{d.pp}</td>
									<td>
										<c:for list="d.getTypes()" var="t" className='java.lang.String'>
											{t} -
										</c:for>
									</td>
									<td>{d.category}</td>
									<td>
										<c:if condition="d.isDamageMove()">
											<c:message value="msg_moves,damaging"/>
										</c:if>
										<c:if condition="!d.isDamageMove()">
											<c:message value="msg_moves,status"/>
										</c:if>
									</td>
									<td>
										<c:if condition="!d.isDamageMove()">
											<c:message value="msg_moves,status_indirect"/>
										</c:if>
										<c:if condition="d.isDamageMove()">
											<c:if condition="d.isDirect()">
												<c:message value="msg_moves,damaging_direct"/>
											</c:if>
											<c:if condition="!d.isDirect()">
												<c:message value="msg_moves,damaging_indirect"/>
											</c:if>
										</c:if>
									</td>
									<td>{d.priority}</td>
									<td>
										<input c:varValue="d.selected" name="d.selected" type="checkbox"/>
									</td>
								</tr>
							</c:for>
						</tbody>
					</table>
					<c:submit message="msg_simulation,select"/>
				</form>
			</c:if>
			<form action="" c:command="$changeFightWhileEnd" method="post" name="cancelmovesset">
				<c:submit message="msg_simulation,previous_button"/>
			</form>
			<form action="" c:command="$validateMovesAfterFight" method="post" name="validmovesset">
				<c:submit message="msg_simulation,next_button"/>
			</form>
		</c:if>
	</body>
</html>