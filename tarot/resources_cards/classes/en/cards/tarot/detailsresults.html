<html c:bean="details" xmlns:c="javahtml">
<head>
<title>Results</title>
<link href="resources_cards/css/main.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<c:if condition="playClassicGame()">
		<h1>Calculation of bidding points</h1>
		<p>Base points for bidding: {basePoints}</p>
		<p>Player who has led the trump ace to the last trick:
			{playerSmall}</p>
		<p>Difference between taker''s points and necessary points in
			order to win this deal: {differenceScoreTaker}</p>
		<p>Rate in relationship with bidding: {rate}</p>
		<p>Taker''s score without declaring: ( {basePoints} + {small} +
			{differenceScoreTaker} ) * {rate} = {multipliedTmp} points</p>
		<h1>Calculation of players''s declaring</h1>
		<ul>
			<c:for var="l" list="linesDeclaring" className='cards.tarot.beans.SumDeclaringPlayer'>
				<li>{l;nickname}''s declaring ({l;status}): <br />
					<ul>
						<c:for key="h" value="p" map="l;handfuls">
							<li>{h;} : {p;}</li>
						</c:for>
						<c:for key="m" value="p" map="l;miseres">
							<li>{m;} : {p;}</li>
						</c:for>
						<li>Sum : {l;sum}</li>
					</ul>
				</li>
			</c:for>
			<li>Sum of players'' declaring: {sumPlayers}</li>
		</ul>
		<br />
		<h1>Additional bonuses</h1>
		Bonuses for attack team:{additionnalBonusesAttack}<br />
		Bonuses for defense team:{additionnalBonusesDefense}<br />
		Sum of additional bonuses: {diffAttackDefenseBonuses}<br />
		<table border="1">
			<caption>Rates and scores of this deal for each player</caption>
			<thead>
				<tr>
					<td>Player</td>
					<td title="This rate is applied on taker''s score">Rate</td>
					<td
						title="This score belongs to a linear relationship with taker''s score and the rate">Score</td>
				</tr>
			</thead>
			<tbody>
				<c:for var="l" list="playersScores" className='cards.tarot.beans.ScoresPlayers'>
					<tr>
						<td>{l;nickname}</td>
						<td>{l;rate}</td>
						<td>{l;score}</td>
					</tr>
				</c:for>
			</tbody>
		</table>
	</c:if>
	<c:if condition="playVariantModeGame()">
		<table border="1">
			<caption>Steps of calculation of players'' ranking by
				criteria</caption>
			<thead>
				<tr>
					<td>Player</td>
					<td>Ranking in relationship with the difference of points</td>
					<td>Ranking in relationship with the number of oudlers</td>
					<td>Ranking in relationship with the number of characters</td>
					<td>Ranking in relationship with the strength of characters</td>
					<td>Final rank</td>
				</tr>
			</thead>
			<tbody>
				<c:for var="l" list="orderedPlayers" className='cards.tarot.beans.RankingPlayerVariantGame'>
					<tr>
						<td>{l;nickname}</td>
						<td>{l;positionDiff}</td>
						<td>{l;positionOudlers}</td>
						<td>{l;positionCharacters}</td>
						<td>{l;positionStrengthCharacters}</td>
						<td>{l;finalPosition}</td>
					</tr>
				</c:for>
			</tbody>
		</table>
		<table border="1">
			<caption>Calculation of players'' points</caption>
			<thead>
				<tr>
					<td>Nickname</td>
					<td>Won points in the tricks</td>
					<td>Minimum score for winning</td>
					<td>Differences of points</td>
					<td>Rate</td>
					<td>Score</td>
				</tr>
			</thead>
			<tbody>
				<c:for var="l" list="pointsPlayers" className='cards.tarot.beans.PointsPlayerVariantGame'>
					<tr>
						<td>{l;nickname}</td>
						<td>{l;pointsTricks}</td>
						<td>{l;minimumPoints}</td>
						<td>{l;differenceScore}</td>
						<td>{l;rate}</td>
						<td>{l;score}</td>
					</tr>
				</c:for>
			</tbody>
		</table>
		<h1>Calculation of players''s declaring</h1>
		<ul>
			<c:for var="l" list="linesDeclaring" className='cards.tarot.beans.SumDeclaringPlayer'>
				<li>{l;nickname}''s declaring: <br />
					<ul>
						<c:for key="h" value="p" map="l;handfuls">
							<li>{h;}</li>
						</c:for>
						<c:for key="m" value="p" map="l;miseres">
							<li>{m;}</li>
						</c:for>
					</ul>
				</li>
			</c:for>
		</ul>
		<h1>Bonuses</h1>
		<table border="1">
			<caption>Players'' additional bonuses</caption>
			<thead>
				<tr>
					<td>Nickname</td>
					<td>Bonus</td>
				</tr>
			</thead>
			<tbody>
				<c:for var="l" list="bonuses" className='cards.tarot.beans.BonusesPlayers'>
					<tr>
						<td>{l;nickname}</td>
						<td>{l;bonus}</td>
					</tr>
				</c:for>
			</tbody>
		</table>
	</c:if>
</body>
</html>
